define("common:components/pcUI/lightbox/lightbox.js",function(t,i,n){!function(i){"object"==typeof n&&"object"==typeof n.exports?n.exports=i(t("common:components/jquery/jquery.js"),t("common:components/pcUI/class/class.js"),t("common:components/pcUI/mask/mask.js")):i(window.jQuery,window.jQuery.klass,window.jQuery.fn.mask)}(function(t,i,n){var o=document,e=window.Math,s=i.$factory("lightbox",{initialize:function(i){this.options=t.extend({dom:null,selecter:"> img",srcAttr:"data-lightbox-url",altAttr:"alt"},i||{}),this.init()},init:function(){var i=this;i.doms=t(this.options.selecter,this.options.dom),i.mask=new n({autoOpen:!1}),i.index=0,i.container=t(['<div class="ui2-lightbox-container">','<div class="ui2-lightbox-content">','<a href="javascript:void(0);" class="ui2-lightbox-prev"></a>','<a href="javascript:void(0);" class="ui2-lightbox-next"></a>',"</div>",'<div class="ui2-lightbox-bottom">','<a href="javascript:void(0);" class="ui2-lightbox-close">&times;</a>','<span class="ui2-lightbox-alt"></span>',"</div>","</div>"].join("")).appendTo(o.body),i.content=i.container.find(".ui2-lightbox-content"),i.bottom=i.container.find(".ui2-lightbox-bottom"),i.prev=i.container.find(".ui2-lightbox-prev"),i.next=i.container.find(".ui2-lightbox-next"),i.items=t.map(i.doms,function(n){return{alt:t(n).attr(i.options.altAttr),src:t(n).attr(i.options.srcAttr)}}),i.initEvent()},initEvent:function(){var t=this;t.doms.each(function(i){t.o2s(this,"click",function(){return t.open(i),!1})}),t.o2s(window,"resize",function(){t.resetPosition()}),t.bottom.find(".ui2-lightbox-close").click(function(){t.close()}),t.prev.click(function(){t.open(--t.index)}),t.next.click(function(){t.open(++t.index)})},refresh:function(){this.destroy(),this.init()},resetPosition:function(){this.container.css("left",parseInt((t(window).width()-this.container.outerWidth())/2))},load:function(i){var n=this,o=n.getItem(i),s=n.items[i];if(n.content.find("img").hide(),n.bottom.hide().find(".ui2-lightbox-alt").html(s.alt),n.prev.hide(),n.next.hide(),o.length)n.loadComplete(o);else{var a;a=/\?/.test(s.src)?s.src+"&lightbox-random="+e.random():s.src+"?lightbox-random="+e.random();{t("<img />").attr({src:a,alt:s.alt,"data-lightbox-index":i}).hide().bind("load error",function(){n.loadComplete(t(this))}).appendTo(n.content)}}},loadComplete:function(t){var i=this,n=i.content.css("opacity",0),o=t.width(),a=t.height(),c=i.container.width(),r=n.height(),l=e.abs,d=e.max,h=s.DEFAULT_TIME;t.show(),i.container.animate({width:o,left:"-="+(o-c)/2},h*l(o-c)/d(o,c),function(){i.resetPosition(),n.animate({height:a},time2=h*l(a-r)/d(a,r)).animate({opacity:1},h,function(){i.index&&i.prev.show(),i.index<i.items.length-1&&i.next.show(),i.bottom.slideDown()})})},getItem:function(t){return this.content.find("[data-lightbox-index="+t+"]")},open:function(t){var i=this;i.items.length&&(i.mask.open(),i.container.show(),i.resetPosition(),i.load(i.index=null==t?i.index:t))},close:function(){this.mask.close(),this.container.hide()},destroy:function(){var t=this;t.mask.destroy(),t.mask=null,t.container.remove(),t.container=null,t.items.length=0,t.ofs(t.doms,"click"),t.ofs(window,"resize")}});return s.DEFAULT_TIME=1e3,s})});