define("common:components/pcUI/dialog/dialog.js",function(t,o,e){!function(o){"object"==typeof e&&"object"==typeof e.exports?e.exports=o(t("common:components/jquery/jquery.js"),t("common:components/pcUI/class/class.js"),t("common:components/pcUI/mask/mask.js")):o(window.jQuery,window.jQuery.klass,window.jQuery.fn.mask)}(function(t,o,e){var n=document;return o.$factory("dialog",{initialize:function(o){this.options=t.extend({title:"",container:n.body,dom:null,width:400,height:!1,content:"",url:"",esc:!1,mask:!0,autoOpen:!1,buttons:{},handle:null,className:"",customWraper:!1},o||{}),this.init()},init:function(){var o=this;o.firstOpenStatus=!1,o.dom=null;var e=o.container=t(o.options.container);e[0]!=n.body&&!/fixed|absolute/.test(e.css("position"))&&e.css("position","relative"),o.create(),o.options.autoOpen&&o.open()},create:function(){var t=this;t.createMask(),t.createWraper(),t.initEvent()},initEvent:function(){var t=this,o=t.options;t.o2s(window,"resize",function(){t.resetPosition()}),o.handle&&t.o2s(o.handle,"click",function(){t.open()}),t.wraper.find(".ui2-dialog-close").click(function(){t.close()}),t.options.esc&&t.o2s(n,"keyup",function(o){27==o.keyCode&&t.close()})},createMask:function(){this.options.mask&&(this.mask=new e({autoOpen:!1,container:this.container}))},createWraper:function(){var o,e=this,n=e.options;n.customWraper&&n.dom?(e.wraper=t(n.dom).addClass("ui2-dialog-wraper-custom ui2-dialog-wraper"),e.content=e.wraper.find(".ui2-dialog-content")):(o=e.wraper=t('<div class="ui2-dialog-wraper ui2-dialog-wraper-uncustom">'),o.html(['<strong class="ui2-dialog-header">','<a href="javascript:void(0);" class="ui2-dialog-close">&times;</a>','<span class="ui2-dialog-title"></span>',"</strong>"].join("")),e.setTitle(n.title),o.css("width",n.width),e.content=t('<div class="ui2-dialog-content"></div>').css({height:n.height}).appendTo(o),e.initContent()),e.wraper.appendTo(n.container).addClass(n.className),e.setButtons()},initContent:function(){var t=this,o=t.options;o.content?t.setContent(o.content):o.dom?t.setDom(o.dom):o.url&&t.load(o.url)},setContent:function(t){var o=this;o.releaseDom(),o.content.html(t),o.resetPosition()},setDom:function(o){var e=this;e.releaseDom(),e.dom=t(o).show(),e.content.empty().append(e.dom),e.resetPosition()},load:function(t){var o=this;o.content.load(t,function(){o.trigger("contentLoaded"),o.resetPosition()})},releaseDom:function(t){var o=this;(t||(t=o.dom))&&(o.container.append(t),o.options.customWraper&&t.removeClass("ui2-dialog-wraper-custom ui2-dialog-wraper").removeClass(o.options.className),o.dom&&(o.dom=null))},setButtons:function(o){var e=this;if(o||(o=e.options.buttons),!t.isEmptyObject(o)){if(e.buttons)e.buttons.empty();else{var n=e.wraper.find(".ui2-dialog-buttons");0==n.length&&(n=t('<div class="ui2-dialog-buttons">').appendTo(e.wraper)),e.buttons=n}t.each(o,function(o,n){t.isFunction(n)&&(n={events:{click:n},className:""});var i=t('<a href="javascript:void(0);" class="ui2-dialog-button" data-dialog-button-name="'+o+'" />').text(o).addClass(n.className).appendTo(e.buttons);t.each(n.events,function(t,o){i.on(t,function(){o.call(e,i)})})})}},getButton:function(t){var o=this.buttons.find(".ui2-dialog-button");return"number"==typeof t?o.eq(t):o.filter('[data-dialog-button-name="'+t+'"]')},setTitle:function(t){var o=this.wraper.find(".ui2-dialog-header");o.removeClass("ui2-dialog-header-nob"),t===!1?o.hide():""==t&&o.addClass("ui2-dialog-header-nob").css("display","block"),o.find(".ui2-dialog-title").html(t)},resetPosition:function(){var o=this;o.mask&&o.mask.resetPosition();var e,i=o.container[0];i===n.body?(e="fixed",i=window):e="absolute",o.wraper.css({left:parseInt((t(i).outerWidth()-o.wraper.outerWidth())/2),top:parseInt((t(i).outerHeight()-o.wraper.outerHeight())/2),position:e})},open:function(){{var t=this;t.options}t.mask&&t.mask.open(),t.wraper.show(),t.resetPosition(),t.firstOpenStatus||(t.firstOpenStatus=!0,t.trigger("firstOpen")),t.trigger("open")},close:function(){{var t=this;t.options}t.mask&&t.mask.close(),t.wraper.hide(),t.trigger("close")},destroy:function(){var t=this,o=t.options;t.mask&&t.mask.destroy(),t.mask=null,o.customWraper?t.releaseDom(t.wraper):(t.wraper.remove(),t.releaseDom()),t.wraper=null,t.ofs(window,"resize"),o.handle&&t.ofs(o.handle,"click"),t.ofs(n,"keyup")}})})});