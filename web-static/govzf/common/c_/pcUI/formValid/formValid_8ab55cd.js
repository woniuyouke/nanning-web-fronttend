define("common:components/pcUI/formValid/formValid.js",function(e,r,t){!function(r){"object"==typeof t&&"object"==typeof t.exports?t.exports=r(e("common:components/jquery/jquery.js"),e("common:components/pcUI/class/class.js")):r(window.jQuery,window.jQuery.klass)}(function(e,r){var t=r.$factory("formValid",{initialize:function(r){this.options=e.extend({dom:null,rules:{},showSuccessStatus:!1,showErrorStatus:!0,errorStop:!1,skipHidden:!1},r||{}),this.init()},init:function(){this.dom=e(this.options.dom),this.rules={},this.setRules(),this.reset()},setRules:function(r){{var s=this,i=t.DEFAULT_RULES,n=t.ATTRIBUTE_PREFIX;t.ATTIBUTE_LENGTH,t.ATTRIBUTE_RULE}r&&(s.options.rules=r),s.removeRule(),s.getElement().each(function(){var r=this.name;if(r){var t=e(this);e.each(i,function(e,i){var o=n+e;if(null!=t.attr(o)){var u={errorText:t.attr(o+"-error")||i.errorText,successText:t.attr(o+"-success")||i.successText,standard:t.attr(o)};u[e]=t.attr(o),s.addRule(r,u)}})}}),s.addRule(s.options.rules)},check:function(r){var s,i=this,n=!0,o=i.rules,u=i.options.errorStop,a=i.options.skipHidden;i.reset(r,!1),r?(s={},s[r]=o[r]||{}):s=o;for(var l in s){var c=i.getElement(l);if(!(!c.length||c.is(":disabled")||c.is(":hidden")&&a)){var d=s[l],f=t.isCheckBtn(c)?c.filter(":checked").val():c.val(),T=!0;null==f&&(f=""),e.isArray(d)||(d=[d]);for(var h,m=0;m<d.length;m++)if(h=d[m],"function"!=typeof h.rule||h.rule.call(this,f,l,h.standard)?h.rule.constructor!=RegExp||h.rule.test(f)||(n=!1,T=!1):(n=!1,T=!1),!T){if(i.error(l,h.errorText,h.showErrorStatus||i.options.showErrorStatus),u)return n;break}T&&i.success(l,h.successText,h.showSuccessStatus||i.options.showSuccessStatus)}}return n},error:function(e,r,t){null!=r&&t!==!1&&(r=r||"",this.setText(e,r||"","ui2-formvalid-field-error")),this.trigger("error",[e,r])},success:function(e,r,t){null!=r&&t!==!1&&(r=r||"",this.setText(e,r,"ui2-formvalid-field-success")),this.trigger("success",[e,r])},setText:function(e,r,t){var s=this.getElement(e).parent();s.find('.ui2-formvalid-field[data-formvalid-target="'+e+'"]').remove(),null!=r&&s.append('<span class="ui2-formvalid-field '+t+'" data-formvalid-target="'+e+'">'+(r||"&nbsp;")+"</span>")},reset:function(r,s){var i=this;if(r){var n;(null==s||s)&&(n=i.getElement(r).attr(t.ATTRIBUTE_DEFAULT)),i.setText(r,n,"ui2-formvalid-field-default")}else i.getElement().each(function(){var r=this.name;r&&((null==s||s)&&(n=e(this).attr(t.ATTRIBUTE_DEFAULT)),i.setText(r,n,"ui2-formvalid-field-default"))})},addRule:function(r,s){var i=this;if("object"==typeof r)e.each(r,function(e,r){i.addRule(e,r)});else{var n=i.rules[r]||[];e.isArray(n)||(n=[n]);var o=[];e.each(e.makeArray(s),function(r,s){var i=s.rule;i?o.push(s):e.each(t.DEFAULT_RULES,function(r,t){r in s&&o.push(e.extend({},s,{rule:t.rule,errorText:s.errorText||t.errorText,standard:s[r]}))})}),n.push.apply(n,o),i.rules[r]=n}},removeRule:function(e){e?delete this.rules[e]:this.rules={}},getElement:function(e){return this.dom.find(e?'[name="'+e+'"]':"[name]")}});return e.extend(t,{ATTRIBUTE_PREFIX:"data-formvalid-",DEFAULT_RULES:{required:{rule:/\S+/,errorText:"该字段必填"},email:{rule:/^\w[\._\-\w]*@[\w_-]+(?:\.[\w_-]+)+$/i,errorText:"邮箱地址格式错误"},mobile:{rule:/^\d{11}$/,errorText:"手机号码格式错误"},idcard:{rule:/^(?:\d{14}|\d{17})[\dx]$/i,errorText:"身份证格式错误"},number:{rule:/^(?:\d+(?:\.\d+)?)$/,errorText:"该字段必须为数字"},range:{rule:function(r,t,s){return""==e.trim(r)?!0:(s=s.replace(/\s+/g,"").split(","),s[0]&&r<s[0]?!1:s[1]&&r>s[1]?!1:!0)},errorText:"字段输入范围错误"},length:{rule:function(r,t,s){if(""==e.trim(r))return!0;s=s.replace(/\s+/g,"").split(",");var i=String(r).length;return s[0]&&i<s[0]?!1:null==s[1]?i==s[0]:s[1]&&i>s[1]?!1:!0},errorText:"字段输入长度错误"}}}),t.ATTRIBUTE_DEFAULT=t.ATTRIBUTE_PREFIX+"default",t.isCheckBtn=function(e){return e.length&&/checkbox|radio/i.test(e.attr("type"))},t})});