define("web:widget/search/search.js",function(t){"use strict";t.async(["common:components/jquery/jquery.js","web:components/search/jq_dropbox.js"],function(t){var a=t("#J_search_tab"),e=a.find("li"),n=t("#J_search_arrow"),i=t("#J_search_form"),o=t("#J_search_btn"),r=t("#J_search_input"),s=r.next(),c=t("#J_search_suggest"),l=t("#J_search_suggest_list"),u=(t("#J_no_suggest"),{init:function(){this.setCurrentTag(),this.inputKeyword(),this.bindEvent();r.val()&&(r.val(""),l.val(""))},isIE:function(t){var a=document.createElement("b");return a.innerHTML="<!--[if IE "+t+"]><i></i><![endif]-->",1===a.getElementsByTagName("i").length},isIE10:function(){return navigator.userAgent.indexOf("MSIE 10.0")>-1},bindEvent:function(){var a=this;e.click(function(){var o=t(this);o.addClass("active").siblings().removeClass("active");var s=e.index(this),c=70*s+25;t("#J_track_dropBox").val(s),n.is(":animated")||n.animate({left:c},200),a.noSuggestList(),i.data("url",o.attr("data-url")),a.setCurrentTag();var l=r.val();""!=t.trim(l)}),r.bind("propertychange input",function(){a.placeholderLabel()}),r.bind("focus",function(){var e=t(this).val();n.addClass("on"),r.addClass("oborder"),a.placeholderLabel(!0);t(".search_tab_cont").filter(".active");""==t.trim(e)?(a.noSuggestList(),l.hide()):(c.show(),l.show())}).bind("blur",function(){n.removeClass("on"),a.placeholderLabel(),r.removeClass("oborder"),c.hide()}).bind(a.isIE(8)?"keyup":"input",function(){{var e=t(this).val();t(".search_tab_cont").filter(".active")}""==t.trim(e)?a.noSuggestList():(c.show(),l.show())}),s.click(function(){r.focus()}),o.click(function(){a.formSubmit()}),r.keydown(function(t){13===t.keyCode&&a.formSubmit()}),(a.isIE10()||a.isIE(11))&&t(window).bind("beforeunload",function(){r.val("")})},placeholderLabel:function(t){t?s.hide():""!=r.val()?s.hide():s.show()},formSubmit:function(){var a=i.data("url"),e=t.trim(r.val());window.location.href=a+"?kw="+encodeURIComponent(e)},setCurrentTag:function(t){t||e.filter(".active").data("tag")},inputKeyword:function(){var a=t.jq_dropbox({options:{type:"auto",element:r,showBox:l,keyboard:!0,showBoxHover:!0,lazyData:!0,trigger:"focus",listTarget:"li"},methods:{onShowListClick:function(a,e){var n=t(a),i=n.parents("li");if("P"!=a.tagName){"LI"==a.tagName&&(i=n);var o=i.attr("data-url"),r=i.find(".o_n").text();return e.val(r),window.location.href=o,!0}},drawTemplate:function(a,e,n){var i=t.trim(r.val()),o="";if(n.data)for(var s=0,c=n.data.length;c>s;s++){var l=n.data[s];o+='<li class="search_lx" data-url='+l.url+' data-autofax="true"><span class="o_n">'+l.name.replace(i,'<em style="color:#279CE8">'+i+"</em>")+'</span><span class="o_r">'+l.region+"</span></li>"}a.html(o)},getAjaxOpts:function(){var a;return"0"==t("#J_track_dropBox").val()?a=1:"1"==t("#J_track_dropBox").val()&&(a=3),console.log(a),{url:"/pc/api/search",data:{keyword:r.val(),type:a}}}}});this.mod=a},noSuggestList:function(){c.hide(),l.html("")}});u.init()})});