define("web:widget/yue_look/yue_look.js",function(e){"use strict";e.async(["common:components/jquery/jquery.js","common:components/pcUI/dialog/dialog.js","web:components/dropSelect/dropSelect.js"],function(e){var a={config:{dateKey:"0",timeKey:"0",sReserveUrl:"/web/tenant/reserve",sBaseInfoUrl:"/web/account/C/baseinfoC",sLoginUrl:"/web/account/login"},init:function(){var e=this;e.initData(),e.bindEvent(),e.checkValue()},initData:function(){var e=this;e.config.date_list=[],e.config.time_list=[],aazPage.pick_date_list.forEach(function(a,t){var i={};i.key=t,i.value="尽快安排看房"==a.date?a.date:a.date+"("+a.week+")",e.config.date_list.push(i)}),aazPage.pick_time_list.forEach(function(a,t){var i={};i.key=t,i.value=a.value,e.config.time_list.push(i)})},bindEvent:function(){var a=this;e(document).on("click","#J_yue_dialog .J_close",function(){e("#J_yue_dialog").dialog("instance").close()}),e(document).on("click","#J_yue_success .J_close,#J_goon",function(){e("#J_yue_success").dialog("instance").close()}),e(".J_appointment").on("click",function(){aazPage.isLogin&&""!=aazPage.isLogin?aazPage.isOutAppointmentHouse?window.location.href=aazPage.outAppointmentHouseUrl:e("#J_yue_dialog").dialog("instance").open():e(".login-dialog-wrapper").dialog("instance").open()}),e("#J_data_list").dropSelect({showSelectedVal:!0,data:a.config.date_list,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(t){a.config.dateKey=t[0],console.log(a.config),0!=t[0]?e("#J_time_list").removeClass("hide"):e("#J_time_list").addClass("hide")}}),e("#J_time_list").dropSelect({showSelectedVal:!0,data:a.config.time_list,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(e){a.config.timeKey=e[0],console.log(a.config)}}),e("#J_agree").on("click",function(){e(this).hasClass("select")?e(this).removeClass("select"):e(this).addClass("select"),a.checkValue()}),e("#J_real-name").on("input",function(){a.checkValue()}),e("#J_yue_dialog").dialog({customWraper:!0,autoOpen:!1}),e("#J_yue_success").dialog({customWraper:!0,autoOpen:!1}),e("#J_yue_fail").dialog({customWraper:!0,autoOpen:!1}),e("#J_yue_btn").on("click",function(){e(this).attr("disabled","disabled");var t;t="0"==a.config.dateKey?"":aazPage.pick_date_list[a.config.dateKey].value+" "+aazPage.pick_time_list[a.config.timeKey].value+":00";var i={houseId:aazPage.houseId,mobile:e("#J_mobile").val().trim(),name:e("#J_real-name").val().trim(),reserveDate:t};e.ajax({url:a.config.sReserveUrl,type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i),success:function(a){a.success?(e("#J_yue_dialog").dialog("instance").close(),e("#J_yue_success").dialog("instance").open()):(e("#J_err-text").html(a.msg),e("#J_yue_dialog").dialog("instance").close(),e("#J_yue_fail").dialog("instance").open()),e(this).removeAttr("disabled")},error:function(){e(this).removeAttr("disabled")}})})},checkValue:function(){var a=e("#J_real-name").val().trim(),t=e("#J_agree").hasClass("select");""!==a&&t?e("#J_yue_btn").removeClass("disabled").removeAttr("disabled"):e("#J_yue_btn").addClass("disabled").attr("disabled","disabled")}};a.init()})});