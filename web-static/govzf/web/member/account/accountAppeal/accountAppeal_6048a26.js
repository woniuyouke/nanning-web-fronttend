define("web:static/member/account/accountAppeal/accountAppeal.js",function(t){"use strict";t.async(["common:components/jquery/jquery.js","common:components/pcUI/uploader/uploader.js","common:components/pcUI/tips/tips.js"],function(t,a,e){var n="icon-checkbox_selected",c="icon-checkbox_unselect",i={config:{appealUrl:"/web/account/appeal",param:{backExt:"",backKey:"",frontExt:"",frontKey:"",handheldExt:"",handheldKey:"",submitPlatform:0}},init:function(){this.bindEvent(),this.uploaderImg()},bindEvent:function(){var a=this;t("#close-tip").on("click",function(){t(this).parent().css("visibility","hidden")}),t("#checkbox").on("click",function(){t(this).hasClass(n)?(t(this).removeClass(n),t(this).addClass(c)):(t(this).addClass(n),t(this).removeClass(c))}),t(".dialog-wrapper").dialog({customWraper:!0}),t("#appeal-dialog").on("click",".close-btn",function(){t("#appeal-dialog").dialog("instance").close()}),t("#appeal-btn").on("click",function(){t("#appeal-dialog").dialog("instance").close(),location.href="/pc/user/setting"}),t("#submit").click(function(){a.isValid()&&t.ajax({url:a.config.appealUrl,type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify(a.config.param),success:function(a){a.success?t("#appeal-dialog").dialog("instance").open():t(".error-msg").text(a.msg)},error:function(){}})})},uploaderImg:function(){var a=this;t("#upload-zm").click(function(){t("#fileInput-zm").trigger("click")}),t("#fileInput-zm").on("change",function(n){var c=new FormData,i=n.target.files||n.dataTransfer.files;c.append("part",i[0]),t.ajax({url:"http://"+uploadUrl+"/upload/house.html",type:"post",data:c,contentType:!1,processData:!1,cache:!1,success:function(n){if(a.config.param.backKey&&a.config.param.backKey==n.part.sKey)return void e.warn("请不要上传相同的图片！",3e3);if(a.config.param.frontExt=n.part.sExt,a.config.param.frontKey=n.part.sKey,/^(png|jpe?g)$/.test(n.part.sExt)){var c="http://"+viewUrl+"/view/house/"+n.part.sKey+"/900x675."+n.part.sExt,i=t('<img src="'+c+'" style="height:100%;"/>');t("#zm-pre").empty().append(i)}}})}),t("#upload-fm").click(function(){t("#fileInput-fm").trigger("click")}),t("#fileInput-fm").on("change",function(n){var c=new FormData,i=n.target.files||n.dataTransfer.files;c.append("part",i[0]),t.ajax({url:"http://"+uploadUrl+"/upload/house.html",type:"post",data:c,contentType:!1,processData:!1,cache:!1,success:function(n){if(a.config.param.frontKey&&a.config.param.frontKey==n.part.sKey)return void e.warn("请不要上传相同的图片！",3e3);if(a.config.param.backExt=n.part.sExt,a.config.param.backKey=n.part.sKey,/^(png|jpe?g)$/.test(n.part.sExt)){var c="http://"+viewUrl+"/view/house/"+n.part.sKey+"/900x675."+n.part.sExt,i=t('<img src="'+c+'" style="height:100%;"/>');t("#fm-pre").empty().append(i)}}})}),t("#upload-sc").click(function(){t("#fileInput-sc").trigger("click")}),t("#fileInput-sc").on("change",function(e){var n=new FormData,c=e.target.files||e.dataTransfer.files;n.append("part",c[0]),t.ajax({url:"http://"+uploadUrl+"/upload/house.html",type:"post",data:n,contentType:!1,processData:!1,cache:!1,success:function(e){if(a.config.param.handheldExt=e.part.sExt,a.config.param.handheldKey=e.part.sKey,/^(png|jpe?g)$/.test(e.part.sExt)){var n="http://"+viewUrl+"/view/house/"+e.part.sKey+"/900x675."+e.part.sExt,c=t('<img src="'+n+'" style="height:100%;"/>');t("#sc-pre").empty().append(c)}}})})},isValid:function(){var a=t(".error-msg");return""==this.config.param.frontKey?void a.text("请上传身份证正面"):""==this.config.param.backKey?void a.text("请上传身份证反面"):""==this.config.param.handheldKey?void a.text("请上传手持身份证照片"):(a.empty(),!0)}};i.init()})});