define("web:static/member/user/myfocus.js",function(n){"use strict";n.async(["common:components/jquery/jquery.js","common:components/pcUI/template/template.js","common:components/pcUI/pager/pager.js"],function(n,e){function i(e,i,t,r){n.ajax({url:e,type:i||"get",data:t,dataType:"json",success:function(n){0===n.code&&r(n)}})}var t={houselistTpl:"<%list.forEach(function(item) { %>\r\n	<li class='house-every-item'>\r\n		<dl class='detail-pic clearfix'>\r\n			<dt class='pic'>\r\n			    <a href='<%= item.upStatus ?  item['url'] : \"javascript:;\"%>'>\r\n				<img src=\"<%=item['picUrls'][0]%>\" title='图片'>\r\n				<% if(item['houseType']) { %>\r\n					<%\r\n						var houseType = '';\r\n						if (item['houseType'] == '3') {\r\n								houseType = 'house-type-gr';\r\n						}\r\n						if (item['houseType'] == '4') {\r\n								houseType = 'house-type-zj';\r\n						}\r\n						if (item['houseType'] == '2') {\r\n								houseType = 'house-type-zlqy';\r\n						}\r\n						if (item['houseType'] == '5') {\r\n								houseType = 'house-type-gy';\r\n						}\r\n						if (item['houseType'] == '6') {\r\n								houseType = 'house-type-kfqy';\r\n						}\r\n					%>\r\n				<span class=\"house-type <%=houseType%>\"></span>\r\n				<%}%>\r\n				</a>\r\n				<% if(item['category'] && item['category'] == 2) { %>\r\n				<span class='roomcount'>统一装修户型&nbsp;共<%=item['roomCount']%>间</span>\r\n				<% } %>\r\n\r\n				<%if(!item.upStatus) { %>\r\n                	<p class='off-dialog'>已下架</p>\r\n                <%}%>\r\n			</dt>\r\n			<dd class='detail clearfix'>\r\n				<div class='detail-left'>\r\n					<p class='title'>\r\n						<a href=\"<%= item.upStatus ?  item['url'] : \"javascript:;\"%>\" class='<%= item.upStatus ?  \"\" : \"strike-through\" %>'><%=item['title']%></a>\r\n						<% if(item['isGuaranty']) {%>\r\n						<span class='tag'>信用免押</span>\r\n						<% } %>\r\n					</p>\r\n					<p class='huxing'><%=item['rentType'] == 1 ? '整租&nbsp;·&nbsp;' : '合租&nbsp;·&nbsp;'%>\r\n					<%= item['layout'] ? item['layout'] + '&nbsp;·&nbsp;' : ''%><%= item['area']%></p>\r\n					<p class='location'><%=item['location']%>&nbsp;&nbsp; <%=item['address']%></p>\r\n					<p class='tags clearfix'>\r\n						<% item['tags'].forEach(function(tag){%>\r\n						<span><%=tag%></span>\r\n						<%})%>\r\n					</p>\r\n					<p class=\"fangdong clearfix\">\r\n							<!-- <img src=\"../static/zf/markeylist/img/landlord.png\">\r\n							<span>认证房东</span> -->\r\n							<% if(item['govHouseNumber']) {%>\r\n							<img src=\"<%= iconOneUrl %>\">\r\n							<span class=\"yhy\">已核验</span>\r\n							<%}%>\r\n							<% if(item['houseIsMortgage'] !== '') {%>\r\n							<img src=\"<%= iconTwoUrl %>\">\r\n							<span class=\"is-pledge\"><%=item['houseIsMortgage'] == 0 ? '无抵押' : '有抵押'%></span>\r\n							<%}%>\r\n\r\n					</p>\r\n				</div>\r\n				<% \r\n				  var price = item['price'];\r\n				  console.log(price)\r\n				%>\r\n				<div class='detail-right'>\r\n					<p class='price'><strong class='<%= item.upStatus ?  \"\" : \"change-gray\" %>'><%= price %></strong><span class='<%= item.upStatus ?  \"\" : \"change-gray\" %>'>元/月</span></p>\r\n				</div>\r\n				<span class='delete-icon icon iconfont icon-nav_detele' data-id='<%= item['id']%>' ></span>\r\n			</dd>\r\n		</dl>\r\n		<% if(item['traffic']) { %>\r\n			<%\r\n				var type = null;\r\n				if(item['traffic']['trafficType'] == '1') {\r\n					type = 'icon-surrounding_metro';\r\n				} \r\n				if(item['traffic']['trafficType'] == '2') {\r\n					type = 'icon-bike_ic';\r\n				} \r\n				if(item['traffic']['trafficType'] == '3') {\r\n					type = 'icon-walk_ic';\r\n				} \r\n				if(item['traffic']['trafficType'] == '4') {\r\n					type = 'icon-car_ic';\r\n				} \r\n\r\n			%>\r\n			<p class='line icon iconfont <%=type%>'>\r\n				<span class='time'><%=item['traffic']['trafficTime']%></span>\r\n				<span class='trafficType'><%=item['traffic']['distance']%></span>\r\n			</p>\r\n		<%} %>\r\n	</li>\r\n<% }) %>",piblishlistTpl:"<%list.forEach(function(item) { %>\r\n	<li class='house-every-item'>\r\n		<dl class='detail-pic clearfix'>\r\n			<dt class='pic'>\r\n			    <a href='<%= item['detail'] %>'>\r\n				<img src=\"<%=item['picUrls'][0]%>\" title='图片'>\r\n				</a>\r\n				<% if(item['category'] && item['category'] == 2) { %>\r\n				<span class='roomcount'>统一装修户型&nbsp;共<%=item['roomCount']%>间</span>\r\n				<% } %>\r\n\r\n				<%if(item['applicationStatus'] == 1) { %>\r\n               	 	<span class=\"apply-tag ing\"></span>\r\n                <%}%>\r\n                <%if(item['applicationStatus'] == 2) {%>\r\n                	<span class=\"apply-tag soon\"></span>\r\n                <%}%>\r\n               <%if(item['applicationStatus'] == 3) {%>\r\n                	<span class=\"apply-tag over\"></span>\r\n                <%}%>\r\n			</dt>\r\n			<dd class='detail clearfix'>\r\n				<div class='detail-left'>\r\n					<p class='title'>\r\n						<a href=\"<%= item['detail'] %>\">\r\n						<% if(item['publicType'] == 1) {%>\r\n						【公租房】\r\n						<%}%>\r\n						<% if(item['publicType'] == 2) {%>\r\n						【人才房】\r\n						<%}%>\r\n						<% if(item['publicType'] == 3) {%>\r\n						【公租房/人才房】\r\n						<%}%>\r\n						<%=item['communityName']%>\r\n						</a>\r\n					</p>\r\n					<%if(item['layoutInfo']) {%>\r\n						<p class='huxing'><%=item['layoutInfo']%></p>\r\n					<%}%>\r\n					<%if(item['districtName'] || item['districtName']) { %>\r\n							<p class='location'><%=item['districtName'] ? item['districtName'] + '-' : ''%><%item['districtName']%>&nbsp;&nbsp; <%=item['blockName']%></p>\r\n				   <%}%>\r\n					<p class='tags clearfix'>\r\n						<% item['tags'].forEach(function(tag){%>\r\n						<span><%=tag%></span>\r\n						<%})%>\r\n					</p>\r\n					<%if(item['logoUrl'] || item['brandName']) {%>\r\n					<span class='brand'>\r\n					    <%if(item['logoUrl'] && !item['brandName']) { %>\r\n					    	<img src='<%=item['logoUrl']%>'>\r\n						<% } else { %>\r\n							<%=item['brandName']%>\r\n						<% } %>\r\n					</span>\r\n					<%}%>\r\n				</div>\r\n\r\n				<div class='detail-right'>\r\n\r\n					<% if( item['publicTypePrice']['data'] && item['publicTypePrice']['data'].length > 0) { %>\r\n						<% for(var i in item['publicTypePrice']['data']) { %>\r\n							<p class='price'>\r\n								<strong><%= item['publicTypePrice']['data'][i].price %><%= item['priceUnit'] %></strong><br><%= item['publicTypePrice']['data'][i].name%>价\r\n							</p>\r\n						<% } %>\r\n					<% }else{ %>\r\n						<p class=\"price\">\r\n							<strong><%= item['publicTypePrice']['default'] %></strong>\r\n						</p>\r\n					<% } %>\r\n\r\n				</div>\r\n				<span class='delete-icon icon iconfont icon-nav_detele' data-id=\"<%= item['id'] %>\" ></span>\r\n			</dd>\r\n		</dl>\r\n		<% if(item['traffic']) { %>\r\n			<%\r\n				var type = null;\r\n				if(item['traffic']['trafficType'] == '1') {\r\n					type = 'icon-surrounding_metro';\r\n				}\r\n				if(item['traffic']['trafficType'] == '2') {\r\n					type = 'icon-bike_ic';\r\n				}\r\n				if(item['traffic']['trafficType'] == '3') {\r\n					type = 'icon-walk_ic';\r\n				}\r\n				if(item['traffic']['trafficType'] == '4') {\r\n					type = 'icon-car_ic';\r\n				}\r\n\r\n			%>\r\n			<p class='line icon iconfont <%=type%>'>\r\n				<span class='time'><%=item['traffic']['trafficTime']%></span>\r\n				<span class='trafficType'><%=item['traffic']['distance']%></span>\r\n			</p>\r\n		<%} %>\r\n	</li>\r\n<% }) %>",pageTotal:null,currentPage:1,pageSize:15,index:0,currentSize:0,init:function(){this.loadPage(0),this.bindEvent()},bindEvent:function(){var e=this;n(".nav-child").click(function(){if(n(this).hasClass("country"))return!1;var i=n(this).index();n(this).addClass("current").siblings().removeClass("current"),n("#J_pagenation").pager("instance")&&n("#J_pagenation").pager("instance").destroy(),e.loadPage(i)}),n("body").on("click",".delete-icon",function(){e.deleteHouse(n(this).attr("data-id"))})},loadPage:function(t,r){var a=this;a.index=Number(t),a.currentPage=r||1,a.type=n(".nav-child.current").data("type");var s={page:r||1,type:a.type,pageSize:a.pageSize},c=a.houselistTpl;i(configPager.houseListUrl,"",s,function(i){i.data.total?(n("#J_house_list").html(e.parse(c,{list:i.data.list,iconOneUrl:iconOneUrl,iconTwoUrl:iconTwoUrl})),n("#J_house_list").show(),n("#J_no_info").hide()):(1==a.type?n("#J_type_name").html("市场房源"):2==a.type?n("#J_type_name").html("公租房源"):4==a.type&&n("#J_type_name").html("国有房源"),n("#J_no_info").show(),n("#J_house_list").hide()),n("#J_pagenation").pager("instance")&&Math.ceil(i.data.total/a.pageSize)!==a.pageTotal&&n("#J_pagenation").pager("instance").destroy(),a.pageTotal=Math.ceil(i.data.total/a.pageSize),a.page=i.data.page,a.currentSize=i.data.list.length,a.pageTotal>1&&!n("#J_pagenation").pager("instance")&&a.pagination()})},deleteHouse:function(n){var e=this,t={objectId:n,type:e.type};i(configPager.deleteHouseUrl,"",t,function(){1!=e.currentSize?e.loadPage(e.index,e.currentPage):e.loadPage(e.index,e.currentPage-1)})},pagination:function(){{var e=this;n("#J_pagenation").pager({pageTotal:e.pageTotal,currentPage:e.page||1,className:"pagination-box",currentClassName:"current-pager"}).on("pager:switch",function(n,i){console.log(i),e.loadPage(e.index,i),e.paginationPosition()})}e.paginationPosition()},paginationPosition:function(){var e=0;n(".pagination-box li").each(function(){e+=n(this).outerHeight()+12}),n(".pagination-box").width(e)}};t.init()})});