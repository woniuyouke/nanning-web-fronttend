define("web:static/member/user/zuyue/addContract.js",function(e){"use strict";e.async(["common:components/jquery/jquery.js","common:components/pcUI/dialog/dialog.js","web:components/bootstrap-datetimepicker/bootstrap-datetimepicker.js","web:components/dropSelect/dropSelect.js","common:components/ui/getQueryString/getQueryString.js","web:components/utils/store.js","common:components/pcUI/uploader/uploader.js","common:components/pcUI/tips/tips.js","common:components/pcUI/tooltip/tooltip.js"],function(e,t,n,a,r,i,o,l){var s={config:{id:r("id"),initData:{},identityTypeEnum:[{key:1,value:"居民身份证"},{key:2,value:"营业执照"},{key:3,value:"组织机构代码证"},{key:4,value:"事业单位法人证书"},{key:5,value:"港澳台通行证"},{key:6,value:"港澳台身份证"},{key:7,value:"户口簿"},{key:8,value:"军官证"},{key:9,value:"护照"},{key:10,value:"往来大陆通行证"},{key:11,value:"其他"}],ownerIdentityType:null,tenantIdentityType:null,constructureEnum:[{key:1,value:"钢结构"},{key:2,value:"钢、钢筋混凝土结构"},{key:3,value:"钢筋混凝土结构"},{key:4,value:"混合结构"},{key:5,value:"砖木结构"},{key:6,value:"其他结构"}],constructure:null,paymentCycleEnum:[{key:1,value:"月付"},{key:3,value:"季付"},{key:6,value:"半年付"},{key:12,value:"年付"},{key:13,value:"其他"}],paymentCycle:null,otherFeeEnum:[{key:1,value:"水费"},{key:2,value:"电费"},{key:3,value:"燃气费"},{key:4,value:"物业管理费"},{key:5,value:"车位费"},{key:6,value:"电视收视费"},{key:7,value:"卫生费"},{key:8,value:"网络费"},{key:9,value:"电话费"},{key:10,value:"室内设施维修费"},{key:11,value:"其它"}],contractConcludeTypes:[{key:1,value:"甲乙双方自行订立"},{key:2,value:"甲乙双方委托同一经纪机构居间代理"},{key:3,value:"其他"}],contractConcludeType:"",otherPromiseWayTypes:[{key:1,value:"提交仲裁委员会仲裁"},{key:2,value:"向人民法院起诉"}],otherPromiseWay:null,attachmentList:[{key:1,name:"WaterMeter",alias:"水表"},{key:2,name:"Ammeter",alias:"电表"},{key:3,name:"GasMeter",alias:"燃气表"},{key:4,name:"Refrigerator",alias:"冰箱"},{key:5,name:"WashingMachine",alias:"洗衣机"},{key:6,name:"AirConditioner",alias:"空调"},{key:7,name:"Television",alias:"电视机"},{key:8,name:"Bed",alias:"床"},{key:9,name:"Sofa",alias:"沙发"},{key:10,name:"DinningTable",alias:"餐桌"}],attachmentCols:[{name:"Brand",alias:"品牌"},{name:"Number",alias:"数量"},{name:"MinNumer",alias:"起计底数"},{name:"Remark",alias:"备注"}],receivedTypeEnum:[{key:1,value:"按账单开始时间提前交租"},{key:2,value:"按固定日期"}],receivedType:null,ownerTypeList:[{key:"个人",value:"个人"}],ownerType:"个人",tenantTypeList:[{key:"个人",value:"个人"},{key:"单位",value:"单位"}],rentUsageList:[{key:"办公",value:"办公"},{key:"住宅",value:"住宅"}],rentUsage:null,addContractUrl:"/web/contract/owner/confirm/"+r("id"),sExt:"",sKey:"",contractAttachment:[],isOwnerAgent:"",isTenantAgent:"",isMortgage:""},flag:{one:!1},init:function(){this.bindEvent(),this.getContractDetail()},getRightProofTypeText:function(e){switch(e){case 1:return"房屋所有权证号";case 2:return"合同备案编号";case 3:return"商品房网签合同编号";default:return"不动产权证号"}},initData:function c(){var c=this.config.initData;e("#community").text(c.community),e("#address").text(c.houseLocation),e("#rentTypeDesc").text(c.rentTypeDesc),console.log(c.rentTypeDesc),"整租"!=c.rentTypeDesc?(e("#rentPos").parent().show(),e("#rentSpace").parent().show()):(e("#J_rentSpace_show").parent().show(),e("#J_rentSpace_show").text(c.space/100)),e("#rentPos").text(c.rentPosition),e("#ownerName").text(c.ownerName),e("#ownerIdentity").text(c.ownerIdentity),e("#ownerPhone").text(c.ownerPhone),e("#tenantName").text(c.tenantName),e("#tenantIdentity").text(c.tenantIdentity),e("#tenantPhone").text(c.tenantPhone),e("#tenantAddress").text(c.tenantAddress),e("#usage").text(c.rentUsageDesc),e("#buildingSize").text(c.space/100),e("#sharedSize").text(c.publicSpace/100||0),e("#ownershipCert").text(this.getRightProofTypeText(c.rightProofType)),"合租"==c.rentTypeDesc?(e("#rentPositioncss").addClass("required"),e("#rentSpace").on("input",function(){e("#J_rentSpace_show").text(e(this).val())})):"整租"==c.rentTypeDesc&&(e("#rentSpace_label").removeClass("hide").text(c.space/100),e("#rentSpace").addClass("hide").val(c.space/100).siblings("label").removeClass("required"),e("#J_rentSpace_show").text(c.space/100)),e("#J_data_list_use").text(c.rentUsageDesc),e("#J_rentType_show").text(c.rentTypeDesc)},bindEvent:function(){var t=this;e(".calendar").datetimepicker({weekStart:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,format:"yyyy-mm-dd"}),e("#ownerAgentCardType").dropSelect({showSelectedVal:!0,data:t.config.identityTypeEnum,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(e){t.config.ownerIdentityType=e[0]}}),e("#tenantAgentCardType").dropSelect({showSelectedVal:!0,data:t.config.identityTypeEnum,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(e){t.config.tenantIdentityType=e[0]}}),e("#constructure").dropSelect({showSelectedVal:!0,data:t.config.constructureEnum,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(e){t.config.constructure=e[0]}}),e("#ownerType").dropSelect({showSelectedVal:!0,data:t.config.ownerTypeList,needDefaultOption:!1,type:"single",defaultValue:["个人"],selectHandler:function(e){t.config.ownerType=e[0]}}),e("#paymentCycle").dropSelect({showSelectedVal:!0,data:t.config.paymentCycleEnum,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(n){t.config.paymentCycle=n[0],"13"==n[0]?e("#otherPaymentCycleBox").css({display:"block"}):(e("#otherPaymentCycle").val(""),e("#otherPaymentCycleBox").css({display:"none"}))}}),e("#receivedType").dropSelect({showSelectedVal:!0,data:t.config.receivedTypeEnum,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(n){t.config.receivedType=n[0];var a=e("#receivedDay-wrapper");a.hasClass("hide")&&a.removeClass("hide"),2==n[0]?(e("#tq").text("每月"),e("#tian ").text("号")):1==n[0]&&(e("#tq").text("提前"),e("#tian ").text("天"))}}),e("#contractConcludeType").dropSelect({showSelectedVal:!0,data:t.config.contractConcludeTypes,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(n){t.config.contractConcludeType=n[0],e("#ownerTenantShareAgent").css("2"==n[0]?{display:"block"}:{display:"none"}),e("#otherSign").css("3"==n[0]?{display:"block"}:{display:"none"})}}),e("#otherPromiseWay").dropSelect({showSelectedVal:!0,data:t.config.otherPromiseWayTypes,needDefaultOption:!1,type:"single",defaultValue:[0],selectHandler:function(n){t.config.otherPromiseWay=n[0],"1"==n[0]?(e("#promiseArbitration").css({display:"block"}),e("#promiseCourt").css({display:"none"})):(e("#promiseCourt").css({display:"block"}),e("#promiseArbitration").css({display:"none"}))}});for(var n in t.config.otherFeeEnum){var a='<label class="" for="ownerFee'+n+'"><input type="checkbox" id="ownerFee'+n+'" value="'+t.config.otherFeeEnum[n].key+'"><span>'+t.config.otherFeeEnum[n].value+"</span></label>";e("#ownerOtherFee").append(a)}e("#ownerFee10").change(function(){e("#ownerOtherFeeOther").css(e(this).is(":checked")?{display:"block"}:{display:"none"})});for(var n in t.config.otherFeeEnum){var a='<label class="" for="tenantFee'+n+'"><input type="checkbox" id="tenantFee'+n+'" value="'+t.config.otherFeeEnum[n].key+'"><span>'+t.config.otherFeeEnum[n].value+"</span></label>";e("#tenantOtherFee").append(a)}e("#tenantFee10").change(function(){e("#tenantOtherFeeOther").css(e(this).is(":checked")?{display:"block"}:{display:"none"})});for(var n in t.config.attachmentList){var r=t.config.attachmentList[n],a='<p class="form-row"><label class="left-label">'+r.key+"."+r.alias+'</label><span>品牌</span><input type="text" class="l-width zj mixed-input" id="attachment'+r.name+'Brand"><span>数量</span><input type="text" class="l-width zj mixed-input" onkeyup="value=value.replace(/[^\\d]/g,\'\')" id="attachment'+r.name+'Number"><span>起记底数</span><input type="text" class="l-width zj mixed-input" onkeyup="value=value.replace(/[^\\d]/g,\'\')" id="attachment'+r.name+'MinNumber"><span>备注</span><input type="text" class="l-width zj mixed-input" id="attachment'+r.name+'Remark">';e("#attachmentList").append(a)}e("#arbitrationTip").tooltip({hover:!0,theme:"blue",pos:"right",offset:5,content:"例如:南宁仲裁委员会"}),e("#courtTip").tooltip({hover:!0,theme:"blue",pos:"right",offset:5,content:"例如:房屋所在地人民法院"}),e("#ownerViolateTip").tooltip({hover:!0,theme:"blue",pos:"right",offset:5,content:"甲方迟延交付房屋，每逾期一日按照月租金的【多少】%向乙方支付违约金。"}),e("#ownerDelayTip").tooltip({theme:"blue",pos:"right",offset:5,content:"甲方迟延交付房屋超过【多少】日乙方有权解除合同。"}),e("#tenantCancelTip").tooltip({theme:"blue",pos:"right",offset:5,content:"甲方交付的房屋严重不符合合同约定，乙方要求解除合同应当在房屋交付后【多少】天内提出；合同解除的，甲方应当按照当月月租金的【多少】倍的金额向乙方支付违约金。"}),e("#tenantOverDueTip").tooltip({theme:"blue",pos:"right",offset:5,content:"乙方迟延支付租金，每逾期一日按照月租金的【多少】%向甲方支付违约金。"}),e("#tenantOverDueDayTip").tooltip({theme:"blue",pos:"right",offset:5,content:"乙方迟延支付房租超过【多少】日甲方有权解除合同。"}),e("#cancelTip").tooltip({theme:"blue",pos:"right",offset:5,content:"合同有效期内，甲方/乙方需要单方面提前解除合同时，应当提前【多少】日提出；同时按照【多少】个月租金【多少】倍的金额向对方支付违约金。"}),e("#toggleTerminate").click(function(){e(this).hasClass("fold")?(e(this).removeClass("fold"),e(this).addClass("unfold")):(e(this).removeClass("unfold"),e(this).addClass("fold")),e("#contractTerminate").toggle()}),e("#toggleDelay").click(function(){e(this).hasClass("fold")?(e(this).removeClass("fold"),e(this).addClass("unfold")):(e(this).removeClass("unfold"),e(this).addClass("fold")),e("#contractDelay").toggle()}),e("#toggleAttachment").click(function(){e(this).hasClass("fold")?(e(this).removeClass("fold"),e(this).addClass("unfold")):(e(this).removeClass("unfold"),e(this).addClass("fold")),e("#attachmentList").toggle()});var i="/static/govzf/web/new_contract_c977eec.pdf";e("#new_contract").attr("href",i),e("input[name='ownerAgent']").change(function(){t.config.isOwnerAgent=e(this).val(),e("#ownerAgentInfo").css(1==e(this).val()?{display:"block"}:{display:"none"})}),e("input[name='tenantAgent']").change(function(){t.config.isTenantAgent=e(this).val(),e("#tenantAgentInfo").css(1==e(this).val()?{display:"block"}:{display:"none"})}),e("input[name='houseMortage']").change(function(){t.config.isMortgage=e(this).val(),e("#mortageInfo").css(1==e(this).val()?{display:"block"}:{display:"none"})}),e("input[name='paymentMethod']").change(function(){2==e(this).val()||3==e(this).val()?(e("#bankTransferPayment").css({display:"block"}),e("#otherPayment").css({display:"none"})):4==e(this).val()?(e("#bankTransferPayment").css({display:"none"}),e("#otherPayment").css({display:"block"})):(e("#bankTransferPayment").css({display:"none"}),e("#otherPayment").css({display:"none"}))}),e(".pretty-radio-wrapper>label").on("click",function(){e(this).addClass("sel").siblings().removeClass("sel")}),e("input[type=radio]").on("click",function(e){e.stopPropagation()}),e("#upload").on("click",function(){e("#fileInput").trigger("click")}),e("#confirm").on("click",function(){t.validate()}),e("#lookTpl").on("click",function(){}),e("#expense").on("input",function(){var n=e(this).val();if(-1!==n.indexOf(".")){var a=n.length-n.indexOf(".")-1;a>2&&e(this).val(n.substring(0,n.indexOf(".")+3))}var r=t.convertCurrency(e(this).val());e("#expenseUpper").text(r)}),e("#fileInput").on("change",function(n){var a=new FormData,r=n.target.files||n.dataTransfer.files;for(var i in r)a.append("part"+i,r[i]);e.ajax({url:"http://"+uploadUrl+"/upload/house.html",type:"post",data:a,contentType:!1,processData:!1,cache:!1,success:function(n){if(n.code)return l.show(n.file),!1;for(var a in n){var r={imgKey:n[a].sKey,imgExt:n[a].sExt};if(t.config.contractAttachment.push(r),/^(png|jpe?g)$/.test(n[a].sExt)){var i="http://"+viewUrl+"/view/house/"+n[a].sKey+"/900x675."+n[a].sExt,o=e('<div class="image-item"><img src="'+i+'"><a class="images-del">x</a></div>');e(".upload-wrapper").width("115px").before(o)}}}})}),e("#pre").on("click",".images-del",function(){var n=e(this).parent(".image-item"),a=n.index();t.config.contractAttachment.splice(a,1),n.remove(),0==t.config.contractAttachment.length&&e(".upload-wrapper").width("402px")}),e("#confirm-cancel-dialog").dialog({customWraper:!0}),e("#confirm-cancel-dialog").on("click",".icon-close_ic, .nocancel",function(){e("#confirm-cancel-dialog").dialog("instance").close()}),e("#cancelDialog").click(function(){e("#confirm-cancel-dialog").dialog("instance").open()})},getContractDetail:function(){var t=this;e.ajax({url:"/web/contract/find/"+t.config.id,type:"GET",success:function(n){e("#load_page").hide(),n.success?(t.config.initData=n.data,t.initData()):n.msg?l.show(n.msg):null!=n.fieldErrors&&l.show(n.fieldErrors[0].msg)},error:function(e){console.log(e)}})},validate:function(){var t=[],n=[],a=[];e("#ownerOtherFee input[type=checkbox]").each(function(){this.checked&&t.push(this.value)}),e("#tenantOtherFee input[type=checkbox]").each(function(){this.checked&&n.push(this.value)}),e("#otherOwnerFee").val().trim()&&t.push("11"),e("#otherTenantFee").val().trim()&&n.push("11");for(var r in this.config.attachmentList){var i=this.config.attachmentList[r],o={brand:e("#attachment"+i.name+"Brand").val().trim(),number:e("#attachment"+i.name+"Number").val().trim(),numberBase:e("#attachment"+i.name+"MinNumber").val().trim(),remark:e("#attachment"+i.name+"Remark").val().trim(),name:i.alias};a.push(o)}var l=this,s={buildingStructure:l.config.constructure,mortgage:e("input[name=houseMortage]").filter(":checked").val(),mortgageDate:e("#mortageCheckDate").val().trim(),authorityCardNo:e("#mortageAuthorityCardNo").val().trim(),peopleLimit:e("#maxPeople").val().trim(),ownerName:e("#ownerName").text(),ownerType:"个人",ownerIdentity:e("#ownerIdentity").text(),ownerPostCode:"",ownerAddress:e("#ownerAddress").val().trim(),ownerEmail:e("#ownerEmail").val().trim(),ownerAgentName:e("#ownerAgentName").val().trim(),ownerAgentCardType:l.config.ownerIdentityType,ownerAgentCardNumber:e("#ownerAgentCardNo").val().trim(),ownerAgentContactNumber:e("#ownerAgentPhoneNumer").val().trim(),ownerAgentAddress:e("#ownerAgentAddress").val().trim(),ownerAgentEmail:e("#ownerAgentEmail").val().trim(),tenantName:e("#tenantName").text(),tenantType:"个人",tenantIdentity:e("#tenantIdentity").text(),tenantPhone:e("#tenantPhone").text(),tenantEmail:e("#tenantEmail").val().trim(),tenantAgentName:e("#tenantAgentName").val().trim(),tenantAgentCardType:l.config.tenantIdentityType,tenantAgentCardNumber:e("#tenantAgentCardNo").val().trim(),tenantAgentContactNumber:e("#tenantAgentPhoneNumer").val().trim(),tenantAgentAddress:e("#tenantAgentAddress").val().trim(),tenantAgentEmail:e("#tenantAgentEmail").val().trim(),tenancyBegin:e("#tenancyBegin").val().trim(),tenancyEnd:e("#tenancyEnd").val().trim(),renewDay:e("#renewDate").val().trim(),paymentCycle:l.config.paymentCycle,otherPaymentCycle:e("#otherPaymentCycle").val().trim(),firstPayDate:e("#initialPaymentDate").val().trim(),residuePayDay:e("#restPaymentDate").val().trim(),receivedDay:e("#restPaymentDate").val().trim(),payType:e("input[name=paymentMethod]").filter(":checked").val(),payName:e("#bankCardName").val().trim(),payBank:e("#bankName").val().trim(),payAccountNo:e("#bankCardNumber").val().trim(),otherPayType:e("#otherPaymentMethod").val().trim(),receivedTypeItem:e("#yjPaymentDate").val().trim(),ownerAdmitCost:t.join(","),ownerOtherAdmitCost:e("#otherOwnerFee").val().trim(),tenantAdmitCost:n.join(","),tenantOtherAdmitCost:e("#otherTenantFee").val().trim(),ownerSubmitDate:e("#propertyDeliverDate").val().trim(),signType:l.config.contractConcludeType,brokerName:e("#sharedAgentCompanyName").val().trim(),brokerContractNo:e("#sharedAgentConractNumber").val().trim(),brokerAgentName:e("#sharedAgentPersonName").val().trim(),brokerAgentPhone:e("#sharedAgentTel").val().trim(),otherSignType:e("#otherSignType").val().trim(),maintenanceDay:e("#repaireDate").val().trim(),ownerDelayDeliveryDay:e("#ownerDelayDay").val().trim(),ownerDelayDeliveryDayLimit:e("#ownerDelayRepairDay").val().trim(),ownerOther:e("#ownerOtherTerminate").val().trim(),tenantDelayMoneyDay:e("#tenantDelayDay").val().trim(),tenantDelayMoneyLimit:e("#tenantDelayMoneyLimit").val().trim(),tenantOther:e("#tenantOtherTerminate").val().trim(),ownerViolateMoneyBreak:e("#ownerViolateMoneyBreak").val().trim(),ownerDelayDeliveryDayBreak:e("#ownerDelayDeliveryDayBreak").val().trim(),tenantCancelContractDay:e("#tenantCancelContractDay").val().trim(),liquidatedDamagesBreak:e("#liquidatedDamagesBreak").val().trim(),tenantOverdueLiquidatedDamages:e("#tenantOverdueLiquidatedDamages").val().trim(),tenantPayLimitDay:e("#tenantPayLimitDay").val().trim(),tenantRemindCancelContractDay:e("#tenantRemindCancelContractDay").val().trim(),violateMoneyMonths:e("#violateMoneyMonths").val().trim(),violateMoneyMonthsMultiple:e("#violateMoneyMonthsMultiple").val().trim(),disputeResolutions:l.config.otherPromiseWay,arbitralInstitution:e("#otherPromiseArbitration").val().trim(),court:e("#otherPromiseCourt").val().trim(),contractFileNumber:e("#contractNumber").val().trim(),ownerContractFileNumber:e("#ownerContractNumber").val().trim(),tenantContractFileNumber:e("#tenantContractNumber").val().trim(),addressChangeNoticeDay:e("#addressChangeDay").val().trim(),accidentHandleMethod:e("#propertyBeMovedWay").val().trim(),otherPromises:"",contractFurnitures:a,expenses:[],receivedType:2,initiate:2};if("整租"==l.config.initData.rentTypeDesc)s.rentArea=l.config.initData.space,s.rentPosition=null;else{if(!e("#rentSpace").val().trim())return void e(".error-msg").text("租赁面积必填!");if(isNaN(e("#rentSpace").val().trim()))return void e(".error-msg").text("租赁面积请填写数字!");s.rentArea=(100*e("#rentSpace").val().trim()).toFixed(0),s.rentPosition=e("#rentPos").val().trim()}if(e("#expense").val().trim()&&s.expenses.push({expenseType:1,expense:(100*Number(e("#expense").val().trim())).toFixed(0)}),e("#yj-expense").val().trim()&&s.expenses.push({expenseType:2,expense:(100*Number(e("#yj-expense").val().trim())).toFixed(0)}),""==l.config.isOwnerAgent)return void e(".error-msg").text("请选择是否启用甲方代理人!");if(""==l.config.isTenantAgent)return void e(".error-msg").text("请选择是否启用乙方代理人!");if(""==l.config.isMortgage)return void e(".error-msg").text("请选择是否抵押房屋!");if(!l.config.contractConcludeType)return void e(".error-msg").text("合同订立方式必选!");if(l.config.contractConcludeType&&"3"==l.config.contractConcludeType&&!s.otherSignType)return void e(".error-msg").text("其他订立方式必填!");if(!s.buildingStructure)return void e(".error-msg").text("房屋结构必选!");if(s.peopleLimit&&Number(s.peopleLimit)<=0)return void e(".error-msg").text("房屋居住人数限制必须是正整数");if(!s.tenancyBegin||!s.tenancyEnd)return void e(".error-msg").text("租期必填!");if(s.expenses.length>0&&!s.expenses[0].expense)return void e(".error-msg").text("租金必填!");if(!s.paymentCycle)return void e(".error-msg").text("付款周期必填!");if(!s.ownerSubmitDate)return void e(".error-msg").text("房屋交付日期必填!");if(!s.signType)return void e(".error-msg").text("合同订立方式必填!");if(!s.disputeResolutions)return void e(".error-msg").text("争议解决方法必填!");if(!s.addressChangeNoticeDay)return void e(".error-msg").text("通知地址变更通知日必填!");if("整租"!=l.config.initData.rentTypeDesc){if(!s.rentArea)return void e(".error-msg").text("租赁面积必填!");if(!s.rentPosition)return void e(".error-msg").text("租赁部位必填!");if(parseFloat(s.rentArea)>=parseFloat(l.config.initData.space))return void e(".error-msg").text("租赁面积必须小于建筑面积!")}e(".error-msg").empty(),l.addContract(s)},addContract:function(t){var n=this;n.flag.one||(n.flag.one=!0,e.ajax({url:n.config.addContractUrl,type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify(t),success:function(t){t.success?location.href="/pc/user/zuyue/detail?id="+n.config.id:e(".error-msg").text(t.fieldErrors&&t.fieldErrors.length>0?t.fieldErrors[0].msg:t.msg),n.flag.one=!1},error:function(){n.flag.one=!1}}))},convertCurrency:function(e){var t,n,a,r,i,o,l,s,c,m,u,d,p,y,g,h=99999999999.99,v="零",f="壹",w="贰",k="叁",b="肆",x="伍",C="陆",T="柒",D="捌",A="玖",N="拾",P="佰",S="仟",E="万",O="亿",F="",M="元",I="角",j="分",L="整";if(e=e.toString(),""==e)return"";if(null!=e.match(/[^,.\d]/))return"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(e=e.replace(/,/g,""),e=e.replace(/^0+/,""),Number(e)>h)return"";if(r=e.split("."),r.length>1?(t=r[0],n=r[1],n=n.substr(0,2)):(t=r[0],n=""),i=new Array(v,f,w,k,b,x,C,T,D,A),o=new Array("",N,P,S),l=new Array("",E,O),s=new Array(I,j),a="",Number(t)>0){for(c=0,m=0;m<t.length;m++)u=t.length-m-1,d=t.substr(m,1),y=u/4,g=u%4,"0"==d?c++:(c>0&&(a+=i[0]),c=0,a+=i[Number(d)]+o[g]),0==g&&4>c&&(a+=l[y]);a+=M}if(""!=n)for(m=0;m<n.length;m++)d=n.substr(m,1),p=n.substr(-1,1),a+=0==d?0==p?"":i[Number(d)]:i[Number(d)]+s[m];return""==a&&(a=v+M),""==n&&(a+=L),a=F+a}};s.init()})});