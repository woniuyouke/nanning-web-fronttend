define("web:static/member/user/zuyue/detail.js",function(a){"use strict";a.async(["common:components/jquery/jquery.js","common:components/pcUI/dialog/dialog.js","common:components/pcUI/template/template.js","common:components/ui/getQueryString/getQueryString.js","common:components/pcUI/tips/tips.js"],function(a,t,r,n,e){var s="icon-checkbox_selected",i="icon-checkbox_unselect",d={pics:[],picsStr:[],config:{id:n("id"),detailUrl:"/web/contract/find/"+n("id"),tenantConfirmUrl:"/web/contract/rent/confirm/"+n("id"),tenantRejectUrl:"/web/contract/rent/reject/"+n("id"),initiateRetireUrl:"/web/contract/evict/retire",retireUrl:"/web/contract/evict/auditing",addScore:"/web/score/add"},flag:{one:!1,two:!1,three:!1,four:!1},score:0,detailTpl:'<%\r\nvar payType = {\r\n    1: \'月付\',\r\n    2: \'2月付\',\r\n    3: \'季付\',\r\n    4: \'4月付\',\r\n    5: \'5月付\',\r\n    6: \'半年付\',\r\n    7: \'7月付\',\r\n    8: \'8月付\',\r\n    9: \'9月付\',\r\n    10: \'10月付\',\r\n    11: \'11月付\',\r\n    12: \'年付\',\r\n    13: \'其他\'\r\n}\r\nvar verifyCrpArr = [\r\n  [\'待确认\',\'待确认\',\'待确认\',\'待确认\'],\r\n  [\'待房东确认\',\'待确认\',\'待房东确认\',\'待确认\'],\r\n  [\'待确认\',\'待租客确认\',\'待租客确认\',\'待确认\'],\r\n  [\'待确认\',\'待确认\',\'待租客确认\',\'待租客确认\'],\r\n  [\'待房东确认\',\'待房东确认\',\'待房东确认\',\'待确认\'],\r\n  [\'待房东确认\',\'待确认\',\'待房东确认\',\'待房东确认\'],\r\n  [\'待确认\',\'待租客确认\',\'待租客确认\',\'待租客确认\']\r\n]\r\n%>\r\n<div class="title-wrapper">\r\n    合同详情\r\n    <span class="contract-number">合同编号: <%= data.contractNo %></span>\r\n</div>\r\n<div class="detail-wrapper">\r\n    <dl class="house-info clearfix">\r\n        <dt class="house-img">\r\n            <% if (data.housePicKey && data.housePicExt) { %>\r\n                <img src="<%= imgUrl + \'/\' + data.housePicKey + \'/900x675.\' + data.housePicExt %>" alt="">\r\n            <% } else { %>\r\n                <img src="<%= defaultUrl %>" alt="">\r\n            <% } %>\r\n        </dt>\r\n        <dd class="house-desc">\r\n            <p class="name">\r\n                <%= data.houseName %>\r\n            </p>\r\n            <p class="addr">\r\n                <i class="icon iconfont icon-search_location"></i>\r\n                <%= data.address %>\r\n            </p>\r\n            <p class="price">\r\n                <%= data.mouthPrice / 100 %>元/月 <%= payType[data.paymentCycle] %>\r\n            </p>\r\n            <div class="status-wrapper">\r\n                <% if (data.currentType == 0) { %>\r\n                    <% if(data.status == 10 && data.type == 1) { %>\r\n                        <div class="status noneffective">合同录入中</div>\r\n                    <% } %>\r\n                    <% if(data.status == 1 && (data.initiate == 3 || data.initiate == 2 || data.initiate == 0)) { %>\r\n                        <% if(data.crpStatus == 1 && data.type == 3) { %>\r\n                            <div class="status noneffective"><%= verifyCrpArr[data.codeStatus][data.currentType] %></div>\r\n                        <% }else{ %>\r\n                            <div class="status noneffective">\r\n                                待确认\r\n                            </div>\r\n                        <% } %>\r\n                    <% } %>\r\n                    <% if(data.status == 10 && data.type == 3) { %>\r\n                        <div class="status noneffective"><%= verifyCrpArr[data.codeStatus][data.currentType] %></div>\r\n                    <% } %>\r\n                    <% if(data.status == 0 && data.initiate == 3) { %>\r\n                        <div class="status noneffective">\r\n                            待确认\r\n                        </div>\r\n                    <% } %>\r\n\r\n                    <% if((data.status == 2 || data.status == 1) && data.initiate == 1) { %>\r\n                        <% if(data.crpStatus == 1 && data.type == 3) { %>\r\n                            <div class="status noneffective"><%= verifyCrpArr[data.codeStatus][data.currentType] %></div>\r\n                        <% }else{ %>\r\n                            <div class="status noneffective">待房东确认</div>\r\n                        <% } %>\r\n                    <% } %>\r\n\r\n                    <% if(data.status == 9 || data.status == 14) { %>\r\n                        <% if(data.evictStatus && data.status == 9) { %>\r\n                            <span>退租失败</span>\r\n                        <% } %>\r\n\r\n                        <div class="status">\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                已生效\r\n                            <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                待生效\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.filling) { %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } else if(!data.isC2B) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="pay" data-type="0" data-id="<%=data.id %>">支付房租</a>\r\n                                <% } %>\r\n                            <% } %>\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="房东">申请退租</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n                    <% if(data.status == 4) { %>\r\n                        <% if(data.evictStatus) { %>\r\n                            <span>退租失败</span>\r\n                        <% } %>\r\n                        <div class="status">\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                已生效\r\n                            <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                待生效\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'\r\n                    <%= JSON.stringify(data) %>\r\n                    \'>南宁市租赁备案证明</a>\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.filling) { %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } else if(!data.isC2B) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="pay" data-type="0" data-id="<%=data.id %>">支付房租</a>\r\n                                <% } %>\r\n                            <% } %>\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="房东">申请退租</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n\r\n                    <% if(data.status == 6 && data.initiate == 0) { %>\r\n                        <div class="status noneffective">\r\n                            <% if(data.recordStatus == 5){ %>\r\n                                已失效\r\n                            <% }else{ %>\r\n                                已结束\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.firstPay) { %>\r\n                            <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n\r\n\r\n                    <% if(data.status == 7 ) { %>\r\n                        <div class="status noneffective">\r\n                            已失效\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% if (data.firstPay) { %>\r\n                            <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n\r\n                    <% if(data.status == 8 && data.initiate == 1) { %>\r\n                        <span>退租申请中</span>\r\n                        <div class="status">\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                已生效\r\n                            <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                待生效\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.firstPay) { %>\r\n                            <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n\r\n                    <% if(data.status == 6 && (data.initiate == 2 || data.initiate == 1)) { %>\r\n                        <span>退租申请成功</span>\r\n                        <div class="status noneffective">\r\n                            <% if(data.recordStatus == 5){ %>\r\n                                已失效\r\n                            <% }else{ %>\r\n                                已结束\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.firstPay) { %>\r\n                            <a href="javascript:;" class="btn light" data-fun="bill" data-type="0" data-id="<%=data.id %>">查看账单</a>\r\n                            <% } %>\r\n                        </div>\r\n                    <% } %>\r\n\r\n                    <% if(data.status == 8 && data.initiate == 2) { %>\r\n                        <span>退租待确认</span>\r\n                        <div class="status">\r\n                            <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                已生效\r\n                            <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                待生效\r\n                            <% } %>\r\n                        </div>\r\n                        <div class="btn-wrapper">\r\n                            <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                            <% } else { %>\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            <% } %>\r\n                            <% if (data.firstPay) { %>\r\n                            <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                            <% } %>\r\n\r\n                            <a href="javascript:;" class="btn light" data-fun="confirm-cancel">确认退租</a>\r\n                            <a href="javascript:;" class="btn border" data-fun="reject-cancel">拒绝退租</a>\r\n                        </div>\r\n                    <% } %>\r\n\r\n                <% } else { %>\r\n                    <% if (data.type != 3) { %>\r\n                        <% if(data.status == 10 && (data.currentType == 1 || data.currentType == 3)) { %>\r\n                            <div class="status noneffective">\r\n                                待确认\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 1 && data.initiate == 3) { %>\r\n                            <div class="status noneffective">\r\n                                待确认\r\n                            </div>\r\n                        <% } %>\r\n                        <% if(data.status == 9) { %>\r\n                            <% if(data.evictStatus) { %>\r\n                                <span>退租失败</span>\r\n                            <% } %>\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if(data.currentType != 3) { %>\r\n                                    <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                        <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="租客">申请退租</a>\r\n                                    <% } %>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 4) { %>\r\n                            <% if(data.evictStatus) { %>\r\n                                <span>退租失败</span>\r\n                            <% } %>\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if(data.currentType != 3) { %>\r\n                                    <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                        <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="租客">申请退租</a>\r\n                                    <% } %>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 6 && data.initiate == 0) { %>\r\n                            <!-- <div class="status noneffective">\r\n                                已结束\r\n                            </div> -->\r\n                            <div class="status noneffective">\r\n                                <% if(data.recordStatus == 5){ %>\r\n                                    已失效\r\n                                <% }else{ %>\r\n                                    已结束\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 7 ) { %>\r\n                            <!-- <div class="status noneffective">已结束</div> -->\r\n                            <div class="status noneffective">\r\n                                已失效\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 14 && data.currentType == 3) { %>\r\n                            <span>退租待确认</span>\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                                <% if(data.isAck != 1) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="confirm-cancel">确认退租</a>\r\n                                    <a href="javascript:;" class="btn border" data-fun="reject-cancel">拒绝退租</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 8 && data.initiate == 1) { %>\r\n                            <span>退租申请中</span>\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n\r\n                                <a href="javascript:;" class="btn light" data-fun="confirm-cancel">确认退租</a>\r\n                                <a href="javascript:;" class="btn border" data-fun="reject-cancel">拒绝退租</a>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 8 && data.initiate == 2) { %>\r\n                            <span>退租待确认</span>\r\n                            <!-- <div class="status">\r\n                                已生效\r\n                            </div> -->\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 6 && (data.initiate == 2 || data.initiate == 1)) { %>\r\n                            <span>退租申请成功</span>\r\n                            <!-- <div class="status noneffective">已结束</div> -->\r\n                            <div class="status noneffective">\r\n                                <% if(data.recordStatus == 5){ %>\r\n                                    已失效\r\n                                <% }else{ %>\r\n                                    已结束\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n\r\n                            </div>\r\n                        <% } %>\r\n\r\n                    <% } %>\r\n                    \r\n                    <% if(data.status == 1 && (data.currentType == 3 || data.currentType == 1)) { %>\r\n                        <% if(data.crpStatus == 1 && data.type == 3) { %>\r\n                            <div class="status noneffective"><%= verifyCrpArr[data.codeStatus][data.currentType] %></div>\r\n                        <% }else if(data.initiate == 2 || data.initiate == 3 || data.initiate == 0){ %>\r\n                            <div class="status noneffective">\r\n                                待租客确认\r\n                            </div>\r\n                        <% } %>\r\n                    <% } %>\r\n\r\n                    <% if (data.type == 3) { %>\r\n                        <% if(data.status == 1 && data.initiate == 2 && data.crpStatus != 1) { %>\r\n                            <div class="status noneffective">\r\n                                待租客确认\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if((data.status == 0 && data.initiate == 3) || (data.status == 2 && data.initiate == 1)) { %>\r\n                            <div class="status noneffective">\r\n                                待确认\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 10 && data.currentType == 3 && data.crpStatus == 1) { %>\r\n                            <div class="status noneffective"><%= verifyCrpArr[data.codeStatus][data.currentType] %></div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 9) { %>\r\n                            <% if(data.evictStatus) { %>\r\n                                <span>退租失败</span>\r\n                            <% } %>\r\n                            <!-- <div class="status">\r\n                                已生效\r\n                            </div> -->\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if(data.currentType != 3) { %>\r\n                                    <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                        <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="租客">申请退租</a>\r\n                                    <% } %>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 6 && data.initiate == 0) { %>\r\n                            <!-- <div class="status noneffective">\r\n                                已结束\r\n                            </div> -->\r\n                            <div class="status noneffective">\r\n                                <% if(data.recordStatus == 5){ %>\r\n                                    已失效\r\n                                <% }else{ %>\r\n                                    已结束\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 8 && data.initiate == 1) { %>\r\n                            <span>退租申请中</span>\r\n                            <!-- <div class="status">已生效</div> -->\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                                <% if (data.isAck != 1) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="confirm-cancel">确认退租</a>\r\n                                    <a href="javascript:;" class="btn border" data-fun="reject-cancel">拒绝退租</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 8 && data.initiate == 2) { %>\r\n                            <span>退租待确认</span>\r\n                            <!-- <div class="status">\r\n                                已生效\r\n                            </div> -->\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 14 && data.currentType == 3) { %>\r\n                            <span>退租待确认</span>\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                                <% if(data.isAck != 1) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="confirm-cancel">确认退租</a>\r\n                                    <a href="javascript:;" class="btn border" data-fun="reject-cancel">拒绝退租</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 6 && (data.initiate == 1 || data.initiate == 2)) { %>\r\n                            <span>退租申请成功</span>\r\n                            <!-- <div class="status noneffective">已结束</div> -->\r\n                            <div class="status noneffective">\r\n                                <% if(data.recordStatus == 5){ %>\r\n                                    已失效\r\n                                <% }else{ %>\r\n                                    已结束\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n                                <% if (data.firstPay) { %>\r\n                                <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                        <% if(data.status == 4) { %>\r\n                            <% if (data.evictStatus) { %>\r\n                                <span>退租失败</span>\r\n                            <% } %>\r\n                            <!-- <div class="status">已生效</div> -->\r\n                            <div class="status">\r\n                                <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                    已生效\r\n                                <% }else if(data.recordStatus == 1 || data.recordStatus == 2){ %>\r\n                                    待生效\r\n                                <% } %>\r\n                            </div>\r\n                            <div class="btn-wrapper">\r\n                                <% if (data.certificationAttachment && (data.recordStatus == 3 || data.recordStatus == 6)) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="beian" data-obj=\'<%= JSON.stringify(data) %>\'>南宁市租赁备案证明</a>\r\n                                <% } else { %>\r\n                                    <a href="javascript:;" class="btn border bg-disabled">南宁市租赁备案证明</a>\r\n                                <% } %>\r\n\r\n                                <% if (data.firstPay) { %>\r\n                                    <a href="javascript:;" class="btn light" data-fun="bill" data-type="1" data-id="<%=data.id %>">查看账单</a>\r\n                                <% } %>\r\n                                <% if(data.currentType != 3) { %>\r\n                                    <% if(data.recordStatus == 3 || data.recordStatus == 6 || data.recordStatus == 7 || data.recordStatus == 8){ %>\r\n                                        <a href="javascript:;" class="btn border" data-fun="apply-cancel" data-to="租客">申请退租</a>\r\n                                    <% } %>\r\n                                <% } %>\r\n                            </div>\r\n                        <% } %>\r\n\r\n                    <% } %>\r\n                <% } %>\r\n            </div>\r\n        </dd>\r\n    </dl>\r\n    <div class="content-wrapper">\r\n        <h3 class="tit">出租方信息</h3>\r\n        <ul class="wrapper clearfix">\r\n            <%if(data.houseType != 2 && data.houseType!= 5){%>\r\n                <h3 class="tit">权利人</h3>\r\n            <% } %>\r\n            <li class="item">\r\n                <% if(data.type == 2) { %>\r\n                    <span class="left-label">企业名称</span>\r\n                <% } else { %>\r\n                    <span class="left-label">名称</span>\r\n                <% } %>\r\n                <%= data.ownerName %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">联系电话</span>\r\n                <%= data.ownerPhone %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">证件类型</span>\r\n                <% if(data.ownerCardType == 1) { %>\r\n                    <span class="left-label">居民身份证</span>\r\n                <% } else { %>\r\n                    <span class="left-label">营业执照号</span>\r\n                <% } %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">证件号码</span>\r\n                <%= data.ownerIdentity %>\r\n            </li>\r\n\r\n            <li class="item">\r\n                <span class="left-label">地址</span>\r\n                <%= data.ownerAddress %>\r\n            </li>\r\n        </ul>\r\n\r\n        <% if(data.crpStatus == 1 && data.houseType != 2 && data.houseType!= 5){ %>\r\n            <% data[\'crpInfo\'].forEach(function(item, index){ %>\r\n                <h3 class="tit">共有权利人<%= index + 1 %></h3>\r\n                <ul class="wrapper clearfix">\r\n\r\n                    <li class="item">\r\n                        <span class="left-label">名称</span>\r\n                        <%= item.name %>\r\n                    </li>\r\n                    <li class="item">\r\n                        <span class="left-label">证件类型</span>\r\n                        <span class="left-label">居民身份证</span>\r\n\r\n                    </li>\r\n                    <li class="item">\r\n                        <span class="left-label">证件号码</span>\r\n                        <%= item.idcard %>\r\n                    </li>\r\n                    <li class="item">\r\n                        <span class="left-label">联系电话</span>\r\n                        <%= item.mobile %>\r\n                    </li>\r\n                </ul>\r\n            <% }) %>\r\n        <% }\r\n        %>\r\n\r\n        <h3 class="tit">承租方信息</h3>\r\n        <ul class="wrapper clearfix">\r\n            <li class="item">\r\n                <span class="left-label">姓名</span>\r\n                <%= data.tenantName %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">联系电话</span>\r\n                <%= data.tenantPhone %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">证件类型</span>\r\n                居民身份证\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">证件号码</span>\r\n                <%= data.tenantIdentity %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">地址</span>\r\n                <%= data.tenantAddress %>\r\n            </li>\r\n        </ul>\r\n        <% if (data.type == 3) { %>\r\n            <h3 class="tit">中间人信息</h3>\r\n            <ul class="wrapper clearfix">\r\n                <li class="item">\r\n                    <span class="left-label">姓名</span>\r\n                    <%= data.introducerName %>\r\n                </li>\r\n                <li class="item">\r\n                    <span class="left-label">手机号</span>\r\n                    <%= data.introducerPhone %>\r\n                </li>\r\n                <li class="item">\r\n                    <span class="left-label">身份证号</span>\r\n                    <%= data.introducerCard %>\r\n                </li>\r\n            </ul>\r\n        <% } %>\r\n        <ul class="wrapper clearfix">\r\n            <h3 class="tit">租约信息</h3>\r\n            <li class="item">\r\n                <span class="left-label">租期</span>\r\n                <%= data.tenancyBegin %> - <%= data.tenancyEnd %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">租金</span>\r\n                <%= data.rentFee ? data.rentFee / 100 : \'\' %>元/月\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">付款周期</span>\r\n                <%= payType[data.paymentCycle] %>\r\n            </li>\r\n\r\n            <li class="item">\r\n                <span class="left-label">押金</span>\r\n                <%= data.guarantee ? data.guarantee / 100 : \'\' %>元\r\n            </li>\r\n        </ul>\r\n        <ul class="wrapper clearfix">\r\n            <h3 class="tit">房屋信息</h3>\r\n            <li class="item">\r\n                <span class="left-label">房屋坐落</span>\r\n                <%= data.houseLocation %>\r\n            </li>\r\n            <li class="item">\r\n                <span class="left-label">建筑面积</span>\r\n                <%= data.buildSpace / 100 %>㎡\r\n            </li>\r\n        </ul>\r\n        <% if(data.recordStatus && data.recordStatus != \'\' && (data.recordStatus == 3 || data.recordStatus == 4 || data.recordStatus == 5 || data.recordStatus == 6 || data.recordStatus == 7)){ %>\r\n            <ul class="wrapper clearfix">\r\n                <h3 class="tit">备案信息</h3>\r\n                <div class="is-ba">备案状态:\r\n                    <% if(data.recordStatus == 3) { %>\r\n                        已备案 &emsp;&emsp; 备案编号:&ensp;<%= data.recordNo %>\r\n                    <% }else if(data.recordStatus == 4){ %>\r\n                        备案失败 &emsp;&emsp; <span style="color:red">失败原因: <%= data.recordRemark %></span>\r\n                    <% }else if(data.recordStatus == 5){ %>\r\n                        已注销\r\n                    <% }else if(data.recordStatus == 6){ %>\r\n                        已备案 &emsp;&emsp; 备案编号:&ensp;<%= data.recordNo %>\r\n                    <% }else if(data.recordStatus == 7){ %>\r\n                        注销中 &emsp;&emsp; 备案编号:&ensp;<%= data.recordNo %>\r\n                    <% } %>\r\n                </div>\r\n            </ul>\r\n        <% } %>\r\n\r\n        <% if(data.pdfKeyExt){ %>\r\n            <ul class="wrapper clearfix">\r\n                <a class="down-contract"\r\n                   href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                   class="" target="_blank">\r\n                    查看合同正本\r\n                </a>\r\n            </ul>\r\n        <% } %>\r\n\r\n    </div>\r\n    <% if((data.currentType == 0 && (data.status == 1 || data.status == 10) && (data.initiate == 0 || data.initiate == 3 || data.initiate == 2)) || (data.currentType == 0 && data.status == 0 && data.initiate == 3)) { %>\r\n        <!-- 个人房源 和 中介房源 租客确认  -->\r\n\r\n        <div class="upload-wrapper">\r\n\r\n\r\n            <p class="form-row">\r\n                <label class="left-label w-left-label required">是否使用CA电子签章</label>\r\n                <span class="pretty-radio-wrapper">\r\n                    <label for="e_signature1" class="iconfont">\r\n                        <span class="pretty-radio"></span>\r\n                        <input type="radio" value="1" id="e_signature1" name="e_signature"/>\r\n                            是\r\n                    </label>\r\n                    <label for="e_signature2" class="iconfont">\r\n                        <span class="pretty-radio"></span>\r\n                        <input type="radio" value="0" id="e_signature2" name="e_signature"/>\r\n                        否\r\n                    </label>\r\n                </span>\r\n            </p>\r\n\r\n\r\n            <div class="row clearfix upload-msg" id="contractSignature">\r\n                <p id="ca-warning-tip" class="tips warning-tip"><i class="iconfont icon-alert_failure"></i>确认合同前，请先下载合同并在双方签字确认后再上传合同签字页!<span\r\n                            class="close-btn iconfont icon-close_ic" id="closeTips"></span></p>\r\n                <div class="contain-left clearfix">\r\n                    <label class="common-label"><span class="required">*</span>合同签字页图片</label>\r\n                </div>\r\n                <div class="contain-right clearfix">\r\n                    <a href="javascript:;" id="selectCredentialsImg" class="upload">点此上传</a>\r\n                    <input type="file" class="hidden-field" id="selectCredentialsImgInput" multiple="multiple">\r\n                </div>\r\n                <div id="credentials-img-uploader" class="image-wrapper clearfix">\r\n\r\n                </div>\r\n            </div>\r\n            <div class="confirm-wrapper">\r\n            <span class="checkbox icon iconfont icon-checkbox_selected">\r\n            </span>\r\n                我已认真阅读并确认\r\n                <% if(data.pdfKeyExt){ %>\r\n                    <a href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                       class="" target="_blank">《房屋租赁合同》</a>\r\n                <% } %>\r\n            </div>\r\n        </div>\r\n        <% if((data.isAck != 1 && data.crpStatus == 1) || data.crpStatus != 1) { %>\r\n            <div class="dqr">\r\n                <a href="javascript:;" class="btn confirm-contract" id="r_confirm">确认合同</a>\r\n                <a href="javascript:;" class="btn cancel-contract" id="r_cancel">拒绝合同</a>\r\n            </div>\r\n        <% } %>\r\n    <% } else if (data.currentType == 1 && data.status == 0 && data.initiate == 3) { %>\r\n        <!-- 中介房源 租客未确认 房东确认 -->\r\n        <div class="confirm-wrapper">\r\n        <span class="checkbox icon iconfont icon-checkbox_selected">\r\n        </span>\r\n            我已认真阅读并确认\r\n            <% if(data.pdfKeyExt){ %>\r\n                <a href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                   class="" target="_blank">《房屋租赁合同》</a>\r\n            <% } %>\r\n        </div>\r\n        <div class="dqr">\r\n            <a href="javascript:;" class="btn confirm-contract" id="o_confirm">确认合同</a>\r\n            <a href="javascript:;" class="btn cancel-contract" id="o_cancel">拒绝合同</a>\r\n        </div>\r\n    <% } else if (data.currentType == 1 && data.type == 3 && (data.status == 2 || data.status == 1 || data.status == 10) && (data.initiate == 1 || data.initiate == 3)) { %>\r\n        <!-- 中介房源 租客已确认 房东确认 -->\r\n        <div class="confirm-wrapper">\r\n        <span class="checkbox icon iconfont icon-checkbox_selected">\r\n        </span>\r\n            我已认真阅读并确认\r\n            <% if(data.pdfKeyExt){ %>\r\n                <a href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                   class="" target="_blank">《房屋租赁合同》</a>\r\n            <% } %>\r\n        </div>\r\n        <% if((data.isAck != 1 && data.crpStatus == 1) || data.crpStatus != 1) { %>\r\n            <div class="dqr">\r\n                <a href="javascript:;" class="btn confirm-contract" id="o_confirm">确认合同</a>\r\n                <a href="javascript:;" class="btn cancel-contract" id="o_cancel">拒绝合同</a>\r\n            </div>   \r\n        <% } %> \r\n    <% } else if (data.currentType == 3 && data.status == 0 && data.initiate == 3 && data.isAck != 1) { %>\r\n        <!-- 中介房源 租客未确认 共有人确认 -->\r\n        <div class="confirm-wrapper">\r\n        <span class="checkbox icon iconfont icon-checkbox_selected">\r\n        </span>\r\n            我已认真阅读并确认\r\n            <% if(data.pdfKeyExt){ %>\r\n                <a href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                   class="" target="_blank">《房屋租赁合同》</a>\r\n            <% } %>\r\n        </div>\r\n        <div class="dqr">\r\n            <a href="javascript:;" class="btn confirm-contract" id="g_confirm">确认合同</a>\r\n            <a href="javascript:;" class="btn cancel-contract" id="g_cancel">拒绝合同</a>\r\n        </div>\r\n    <% } else if (data.currentType == 3 && (data.type == 1 || data.type == 3) && (data.status == 2 || data.status == 1 || data.status == 10) && data.isAck != 1) { %>\r\n        <!-- 中介房源 租客已确认 共有人确认 -->\r\n        <div class="confirm-wrapper">\r\n        <span class="checkbox icon iconfont icon-checkbox_selected">\r\n        </span>\r\n            我已认真阅读并确认\r\n            <% if(data.pdfKeyExt){ %>\r\n                <a href="/web/file/secret/<%= JSON.parse(data.pdfKeyExt).key + \'.\' + JSON.parse(data.pdfKeyExt).ext %>"\r\n                   class="" target="_blank">《房屋租赁合同》</a>\r\n            <% } %>\r\n        </div>\r\n        <div class="dqr">\r\n            <a href="javascript:;" class="btn confirm-contract" id="g_confirm">确认合同</a>\r\n            <a href="javascript:;" class="btn cancel-contract" id="g_cancel">拒绝合同</a>\r\n        </div>\r\n    <% } %>\r\n</div>',isAjax:!1,init:function(){a(".dialog-wrapper").dialog({customWraper:!0}),this.bindEvent(),this.initData()
},initData:function(){this.getDetail()},btnController:function(){this.pics.length>0},sendContractPics:function(t,r){console.log("send pic use ca"),console.log(r);var n=this;if(!n.flag.one){var s=n.pics;if(0==r&&0==s.length)return void e.warn("请上传合同签字页！",3e3);n.flag.one=!0,a.ajax({url:"/web/contract/save/signedContract/"+n.contractId,contentType:"application/json; charset=UTF-8",type:"post",data:JSON.stringify(s),dataType:"json",success:function(a){a.success?r?n.confirm(t,r):n.confirm(t):(n.flag.one=!1,e.warn("合同发送失败",3e3))},error:function(){n.flag.one=!1,e.warn("合同发送失败",3e3)}})}},uploaderImg:function(){var t=this;a("#selectCredentialsImg").on("click",function(){a("#selectCredentialsImgInput").trigger("click")}),a("#selectCredentialsImgInput").on("change",function(r){console.log(window.pageConfig);var n=new FormData,s=r.target.files||r.dataTransfer.files;for(var i in s)n.append("part"+i,s[i]);a.ajax({url:"http://"+window.pageConfig.postPicsUrl+"/upload/house.html",type:"post",data:n,contentType:!1,processData:!1,cache:!1,success:function(r){if(r.code)return e.show(r.file),!1;for(var n in r){var s={imgKey:r[n].sKey,imgExt:r[n].sExt};if(t.picsStr.push(JSON.stringify(s)),t.pics.push(s),/^(png|jpe?g)$/.test(r[n].sExt)){var i="http://"+window.pageConfig.viewUrl+"/view/house/"+r[n].sKey+"/900x675."+r[n].sExt,d=a('<div class="image-item"><img src="'+i+'"><a class="images-del">x</a></div>');a("#credentials-img-uploader").append(d),t.btnController()}}}})})},delImg:function(){var t=this;a("#closeTips").on("click",function(){a(".smallTip").hide()}),a("#credentials-img-uploader").on("click",".images-del",function(){var r=a(this).parent(".image-item"),n=r.index();t.pics.splice(n,1),a("#selectCredentialsImgInput").val(""),r.remove(),t.btnController()})},bindEvent:function(){var t=this,r=null;a(".zuyue-detail-wrapper").on("click",".pretty-radio-wrapper>label",function(){a(this).addClass("sel").siblings().removeClass("sel")}),a(".zuyue-detail-wrapper").on("click","input[type=radio]",function(a){a.stopPropagation()}),a(".zuyue-detail-wrapper").on("click","input[name='e_signature']",function(){a("#contractSignature").css(0==a(this).val()?{display:"block"}:{display:"none"})}),a(".zuyue-detail-wrapper").on("click","span.checkbox",function(){r=a(this),a(this).hasClass(s)?a(this).removeClass(s).addClass(i):a(this).addClass(s).removeClass(i)}),a("#areaAccountReg").on("click",".close-btn",function(){a("#areaAccountReg").dialog("instance").close()}),a("#acceptReg").click(function(){a("#areaAccountReg").dialog("instance").close(),a(".double-confirm-dialog").find("#agree").data("initiate","2"),a(".double-confirm-dialog").dialog("instance").open()}),a(".double-confirm-dialog").on("click",".close-btn",function(){a(".double-confirm-dialog").dialog("instance").close()}),a(".double-confirm-dialog").on("click",".close,.close-btn",function(){a(".double-confirm-dialog").dialog("instance").close()}),a(".double-cancel-dialog").on("click",".close,.close-btn",function(){a(".double-cancel-dialog").dialog("instance").close()}),a(".double-score-dialog").on("click",".close-btn",function(){a(".double-score-dialog").dialog("instance").close(),setTimeout(function(){location.href="/pc/user/zuyue/list"},1e3)}),a(".icon-iconfont_star").click(function(){a("#agreeScore").removeAttr("disabled");for(var r=a(this).index(".icon-iconfont_star"),n="",e=0;5>e;e++)r>=e?a(".icon-iconfont_star:eq("+e+")").removeClass("star-o").addClass("star-yellow"):a(".icon-iconfont_star:eq("+e+")").removeClass("star-yellow").addClass("star-o");switch(a(".double-score-dialog .btn").removeClass("btn-disabled").addClass("btn-heightlight"),r){case 0:n="非常不满意";break;case 1:n="不满意";break;case 2:n="一般";break;case 3:n="满意";break;case 4:n="非常满意";break;default:n=""}a(".score-text").text(n),a("#agreeScore").addClass("btn-available"),t.score=r+1}),a("#agreeScore").on("click",function(){t.score<1||t.flag.two||(t.flag.two=!0,a.ajax({url:t.config.addScore,type:"post",data:{grade:t.score,type:1,objectId:t.companyId,accountId:t.tenantId,raterName:t.tenantName},success:function(r){r.success?(e.show("提交评价成功"),a(".double-score-dialog").dialog("instance").close(),setTimeout(function(){location.href="/pc/user/zuyue/list"},1e3)):(e.show(r.msg),setTimeout(function(){location.href="/pc/user/zuyue/list"},1e3)),t.flag.two=!1},error:function(){t.flag.two=!1}}))}),a("#pay-dialog").on("click",".close-btn",function(){a("#pay-dialog").dialog("instance").close()}),a(".zuyue-detail-wrapper").on("click","#r_confirm",function(){console.log("ca");var t=a("input[name='e_signature']:checked");if(t.length<=0)return void e.show("请选择是否使用CA电子签章");console.log(t.val());var r=t.val();a(".double-confirm-dialog").find("#agree").data("initiate","1"),a(".double-confirm-dialog").find("#agree").data("isUseCa",r),a(".double-confirm-dialog").dialog("instance").open()}),a(".zuyue-detail-wrapper").on("click","#o_confirm",function(){t.areaAccountReg(function(){a(".double-confirm-dialog").find("#agree").data("initiate","2"),a(".double-confirm-dialog").dialog("instance").open()})}),a(".zuyue-detail-wrapper").on("click","#g_confirm",function(){a(".double-confirm-dialog").find("#agree").data("initiate","4"),a(".double-confirm-dialog").dialog("instance").open()}),a(".zuyue-detail-wrapper").on("click","#r_cancel",function(){a(".double-cancel-dialog").find("#cancel").data("initiate","1"),a(".double-cancel-dialog").dialog("instance").open()}),a(".zuyue-detail-wrapper").on("click","#o_cancel",function(){a(".double-cancel-dialog").find("#cancel").data("initiate","2"),a(".double-cancel-dialog").dialog("instance").open()}),a(".zuyue-detail-wrapper").on("click","#g_cancel",function(){a(".double-cancel-dialog").find("#cancel").data("initiate","4"),a(".double-cancel-dialog").dialog("instance").open()}),a(".zuyue-detail-wrapper").on("click","#closeTips",function(){a("#ca-warning-tip").css({display:"none"})}),a("#agree").on("click",function(){var r=a(this).data("initiate"),n=a(this).data("isUseCa");return 1==n?void t.confirm(r,n):0==n?void t.sendContractPics(r,n):void t.confirm(r)}),a("#cancel").on("click",function(){var r=a(this).data("initiate");"1"==r?t.rentReject():("2"==r||"4"==r)&&t.ownerReject()}),a("#pay").click(function(){a.ajax({url:"/web/contract/rent/pay/"+t.config.id+"/1",type:"POST",data:{id:t.config.id,billOrder:"1"},success:function(t){a("#pay-dialog").dialog("instance").close(),t.success?(e.show("支付房租成功"),setTimeout(function(){window.location.reload()},1e3)):e.show(t.msg)},error:function(){}})}),a("#retire-dialog").on("click",".close-btn",function(){a("#retire-dialog").dialog("instance").close()}),a("#retire-btn").click(function(){t.initiateRetire(),a("#retire-dialog").dialog("instance").close()}),a("#isretire-dialog").on("click",".close-btn",function(){a("#isretire-dialog").dialog("instance").close()}),a("#isretire-btn").click(function(){t.isRetire("yes"),a("#isretire-dialog").dialog("instance").close()}),a(".zuyue-detail-wrapper").on("click","a",function(r){var n=r.target;"A"==n.tagName&&("apply-cancel"==a(n).data("fun")&&(a("#role").text(a(n).data("to")),a("#retire-dialog").dialog("instance").open()),"confirm-cancel"==a(n).data("fun")&&a("#isretire-dialog").dialog("instance").open(),"beian"==a(n).data("fun")&&JSON.parse(a(n).data("obj")).certificationAttachment&&window.open("/web/file/secret/"+JSON.parse(a(n).data("obj")).certificationAttachment[0].imgKey+"."+JSON.parse(a(n).data("obj")).certificationAttachment[0].imgExt),"reject-cancel"==a(n).data("fun")&&t.isRetire("no"),"pay"==a(n).data("fun")&&(location.href="/pc/user/listOfBills?type="+a(n).data("type")+"&cid="+a(n).data("id")),"bill"==a(n).data("fun")&&(location.href="/pc/user/listOfBills?type="+a(n).data("type")+"&cid="+a(n).data("id")))})},getDetail:function(){var t=this;a.ajax({url:t.config.detailUrl,type:"GET",data:{id:t.config.id},success:function(a){if(a.success){a.imgUrl=pageConfig.sHouseViewUrl,a.defaultUrl=pageConfig.loadImg,t.contractAttachment=a.data.contractAttachment,t.contractId=a.data.id,t.pdfKeyExt=a.data.pdfKeyExt,t.tenantId=a.data.tenantId,t.tenantName=a.data.tenantName,t.companyId=a.data.companyId,t.houseType=a.data.houseType,t.isRenter=0===a.data.currentType,a.data.rentFee=null,a.data.guarantee=null,a.data.isC2B=2==a.data.type||4==a.data.type||5==a.data.type;for(var r=0;r<a.data.expenses.length;r++){var n=a.data.expenses[r];1==n.expenseType&&(a.data.rentFee=n.expense),2==n.expenseType&&(a.data.guarantee=n.expense)}t.renderDetail(a)}else e.show(a.msg)},error:function(){}})},bindAsyncEvent:function(){},renderDetail:function(t){var n=r.parse(this.detailTpl,t);a(".zuyue-detail-wrapper").append(n),this.btnController(),this.uploaderImg(),this.delImg()},confirm:function(t,r){var n=this,s={contractId:n.config.id,initiate:t,reason:""};n.isAjax||(r&&(s.useCA=r),n.isAjax=!0,a.ajax({url:"/web/contract/confirm/"+n.config.id,type:"POST",data:s,success:function(t){t.success?(e.show("确认合同成功"),a(".double-confirm-dialog").dialog("instance").close(),3!==n.houseType&&n.isRenter?a(".double-score-dialog").dialog("instance").open():location.href="/pc/user/zuyue/list"):e.show(t.msg),n.isAjax=!1,n.flag.one=!1},error:function(){n.isAjax=!1,n.flag.one=!1}}))},ownerReject:function(){var t=this;console.log("房东拒绝签约"),t.flag.three||(t.flag.three=!0,a.ajax({url:"/web/contract/owner/reject/"+t.config.id,type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify({contractId:t.config.id,initiate:2,reason:""}),success:function(a){a.success?(e.show("已取消签约"),setTimeout(function(){location.href="/pc/user/zuyue/list"},1e3)):e.show(a.msg),t.flag.three=!1},error:function(){t.flag.three=!1}}))},rentReject:function(){var t=this;console.log("租客拒绝"),t.flag.three||(t.flag.three=!0,a.ajax({url:"/web/contract/rent/reject/"+t.config.id,type:"POST",data:{id:t.config.id},success:function(a){a.success?(e.show("已取消签约"),setTimeout(function(){location.href="/pc/user/zuyue/list"})):e.show(a.msg),t.flag.three=!1},error:function(){t.flag.three=!1}}))},initiateRetire:function(){var t=this;t.flag.four||(t.flag.four=!0,a.ajax({url:t.config.initiateRetireUrl,type:"POST",data:{contractId:t.config.id},success:function(a){a.success?(e.show("发起退租"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),t.flag.four=!1},error:function(){t.flag.four=!1}}))},isRetire:function(t){var r=this;r.flag.four||(r.flag.four=!0,a.ajax({url:r.config.retireUrl,type:"POST",data:{contractId:r.config.id,status:t},success:function(a){a.success?(e.show("yes"==t?"确认退租":"拒绝退租"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),r.flag.four=!1},error:function(){r.flag.four=!1}}))},areaAccountReg:function(t){var r=this;a.ajax({url:"/web/api/payment/regionRegister/check",type:"GET",success:function(n){200==n.status?n.data.isRegister?t.call(r):a("#areaAccountReg").dialog("instance").open():e.show(n.message)},error:function(){}})}};d.init()})});