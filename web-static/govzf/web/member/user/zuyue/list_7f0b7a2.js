define("web:static/member/user/zuyue/list.js",function(a){"use strict";a.async(["common:components/jquery/jquery.js","common:components/pcUI/dialog/dialog.js","common:components/pcUI/template/template.js","web:components/utils/store.js","common:components/pcUI/pager/pager.js","common:components/pcUI/tips/tips.js"],function(a,t,r,n,i,e){console.log(pageConfig);var s={config:{curId:"",currentPage:1,pageSize:20,total:0,getListUrl:"/web/contract/query/C",tenantRequestCancelSignUrl:"/web/contract/rent/reject/",ownerRejectSignUrl:"/web/contract/owner/reject/",initiateRetireUrl:"/web/contract/evict/retire",retireUrl:"/web/contract/evict/auditing",isOpenWallet:"/web/api/payment/regionRegister/check",openWallet:"/web/api/payment/regionRegister",checkScore:"/web/score/query/c",verifyCrp:"/web/contract/verify/"},flag:{one:!1,two:!1,three:!1,four:!1},listTpl:'<%\r\nvar verifyCrpArr = [\r\n  [\'待确认\',\'待确认\',\'待确认\',\'待确认\'],\r\n  [\'待房东确认\',\'待确认\',\'待房东确认\',\'待确认\'],\r\n  [\'待确认\',\'待租客确认\',\'待租客确认\',\'待确认\'],\r\n  [\'待确认\',\'待确认\',\'待租客确认\',\'待租客确认\'],\r\n  [\'待房东确认\',\'待房东确认\',\'待房东确认\',\'待确认\'],\r\n  [\'待房东确认\',\'待确认\',\'待房东确认\',\'待房东确认\'],\r\n  [\'待确认\',\'待租客确认\',\'待租客确认\',\'待租客确认\']\r\n]\r\n%>\r\n<% for(var i = 0; i < data.length; i++) { %>\r\n<div class="item-wrapper" data-id="<%= data[i].id %>" data-info=\'<%= JSON.stringify({ ownerIdentity: data[i].ownerIdentity, ownerName: data[i].ownerName, ownerPhone: data[i].ownerPhone, tenantIdentity: data[i].tenantIdentity, tenantPhone: data[i].tenantPhone, tenantPostCode: data[i].tenantPostCode, tenantAddress: data[i].tenantAddress, community: data[i].community, address: data[i].address, rightType: data[i].rightType, rentTypeDesc: data[i].rentTypeDesc, tenantName: data[i].tenantName }) %>\'>\r\n    <div class="item-status-wrapper">\r\n    <% if (data[i].currentType == 0) { %>\r\n        <% if(data[i].status == 14) { %>\r\n            <%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                <h3>已生效</h3>\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                <h3>待生效</h3>\r\n            <% } %>\r\n        <% } %>\r\n        <% if(data[i].status == 10 && data[i].type == 1) { %>\r\n            <h3 data-detail="false">合同录入中</h3>\r\n        <% } %>\r\n        <% if(data[i].status == 10 && data[i].type == 3) { %>\r\n            <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n            <% if(data[i].isAck != 1) { %>\r\n                <a href="javascript:;" class="btn light btn-underline" data-fun="o_confirm">确认合同</a>\r\n            <% } %>\r\n        <% } %>\r\n        <% if(data[i].status == 0 && data[i].initiate == 1) { %>\r\n            <h3 data-detail="false">合同录入中</h3>\r\n            <a href="javascript:;" class="btn gray btn-underline cancel-sign" data-fun="t_cancel">取消签约</a>\r\n        <% } %>\r\n        <% if(data[i].status == 0 && data[i].initiate == 3) { %>\r\n                <h3 data-detail="false">待确认</h3>\r\n                <a href="javascript:;" class="btn gray light" data-fun="t_confirm">确认合同</a>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 7 && (data[i].initiate == 1 || data[i].initiate == 2)) { %>\r\n            <h3 data-detail="false">已取消签约</h3>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 1 && (data[i].initiate == 3 || data[i].initiate == 2 || data[i].initiate == 0)) { %>\r\n            <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                <% if(data[i].isAck != 1) { %>\r\n                    <a href="javascript:;" class="btn gray light" data-fun="t_confirm">确认合同</a>\r\n                <% } %>\r\n            <% }else{ %>\r\n                <h3>待确认</h3>\r\n                <a href="javascript:;" class="btn gray light" data-fun="t_confirm">确认合同</a>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if((data[i].status == 2 || data[i].status == 1) && data[i].initiate == 1) { %>\r\n            <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n            <% }else{ %>\r\n                <h3>待房东确认</h3>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 7 && (data[i].initiate == 3 || data[i].initiate == 0)) { %>\r\n        \r\n            <%if(data[i].recordStatus == 4){%>\r\n                <h3>已失效</h3>\r\n            <%}else {%>\r\n                <h3 data-detail="false">已失效</h3>\r\n            <%}%> \r\n\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 9) { %>\r\n            <!-- 加待生效1 -->\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%> </h3>\r\n            <% if(data[i].evictStatus) { %>\r\n            <span>退租失败</span>\r\n            <% } %>\r\n            <% if(data[i].filling) { %>\r\n                <% if(!data[i].firstPay && !data[i].isC2B) { %>\r\n                <a href="javascript:;" class="btn gray light" data-fun="pay" data-type="0" data-id="<%=data[i].id %>">支付房租</a>\r\n                <% } else if (!data[i].isC2B) { %>\r\n                <a href="javascript:;" class="btn gray light" data-fun="bill" data-type="0" data-id="<%=data[i].id %>">查看账单</a>\r\n                <% } %>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 4) { %>\r\n         <!-- 加待生效2 -->\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%> </h3>\r\n            <% if(data[i].evictStatus) { %>\r\n            <span>退租失败</span>\r\n            <% } %>\r\n            <% if(!data[i].evictStatus && data[i].filling) { %>\r\n                <% if(!data[i].firstPay && !data[i].isC2B) { %>\r\n                <a href="javascript:;" class="btn gray light" data-fun="pay" data-type="0" data-id="<%=data[i].id %>">支付房租</a>\r\n                <% } else if (!data[i].isC2B) { %>\r\n                <a href="javascript:;" class="btn gray light" data-fun="bill" data-type="0" data-id="<%=data[i].id %>">查看账单</a>\r\n                <% } %>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 6 && data[i].initiate == 0) { %>\r\n         <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%> </h3>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 6 && (data[i].initiate == 2 || data[i].initiate == 1)) { %>\r\n         <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%><span>退租申请成功</span> </h3>\r\n        <% } %>\r\n        \r\n        <% if(data[i].status == 8 && data[i].initiate == 1) { %>\r\n         <!-- 加待生效3 -->\r\n        <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%> <span>退租申请中</span> </h3>\r\n            <% } %>\r\n\r\n        <% if(data[i].status == 8 && data[i].initiate == 2) { %>\r\n         <!-- 加待生效4 -->\r\n       <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><span>退租待确认</span> </h3>\r\n        <a href="javascript:;" class="btn gray light" data-fun="t_confirmCancel">确认退租</a>\r\n        <a href="javascript:;" class="btn gray border" data-fun="t_rejectCancel">拒绝退租</a>\r\n        <% } %>\r\n    <% } else { %>\r\n        <% if(data[i].status == 14 && data[i].currentType == 3) { %>\r\n            <h3>退租待确认</h3>\r\n            <% if(data[i].isAck != 1) { %>\r\n                <a href="javascript:;" class="btn light btn-underline" data-fun="o_confirmCancel">确认退租</a>\r\n                <a href="javascript:;" class="btn gray btn-underline" data-fun="o_rejectCancel">拒绝退租</a>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if(data[i].status == 10 && data[i].currentType == 1 && data[i].type != 1) { %>\r\n            <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n            <% if(data[i].isAck != 1) { %>\r\n                <a href="javascript:;" class="btn light btn-underline" data-fun="o_confirm">确认合同</a>\r\n            <% } %>\r\n        <% } %>\r\n\r\n        <% if(data[i].type != 3) { %>\r\n            <% if(data[i].status == 10 && (data[i].currentType == 1 || data[i].currentType == 3)) { %>\r\n                <h3>待确认</h3>\r\n                <% if(data[i].isAck != 1 && (data[i].type == 3 || (data[i].type == 1 && data[i].currentType != 1) )) { %>\r\n                    <a href="javascript:;" class="btn light btn-underline" data-fun="o_confirm">确认合同</a>\r\n                <% } %>\r\n            <% } %>\r\n            <% if(data[i].status == 0 && data[i].initiate == 1) { %>\r\n                <h3 data-detail="false">合同待录入</h3>\r\n                <a href="javascript:;" class="btn light btn-underline" data-fun="o_add">录入合同</a>\r\n                <a href="javascript:;" class="btn gray btn-underline" data-fun="o_reject">拒绝签约</a>\r\n            <% } %>\r\n            <% if(data[i].status == 7 && (data[i].initiate == 1 || data[i].initiate == 2)) { %>\r\n                <h3 data-detail="false">已取消签约</h3>\r\n            <% } %>\r\n            <% if(data[i].status == 1 && (data[i].initiate == 3 || data[i].currentType == 3 || data[i].currentType == 1)) {%>\r\n                <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                    <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                <% }else{ %>\r\n                    <h3>待租客确认</h3>\r\n                <% } %>\r\n            <% } %>\r\n            <% if(data[i].status == 7 && (data[i].initiate == 0 || data[i].initiate == 3)) { %>\r\n            <%if(data[i].recordStatus == 4){%>\r\n                <h3>已失效</h3>\r\n            <%}else {%>\r\n                <h3 data-detail="false">已失效</h3>\r\n            <%}%> \r\n            <% } %>\r\n            \r\n            <% if(data[i].status == 9) { %>\r\n                <!-- 加待生效5 -->\r\n                <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                    已生效\r\n                <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                    待生效\r\n                <%}%> </h3>\r\n                <% if(data[i].evictStatus) { %>\r\n                <span>退租失败</span>\r\n                <% } %>\r\n            <% } %>\r\n            <% if(data[i].status == 4) { %>\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><% if(data[i].evictStatus) { %>\r\n                    <span>退租失败</span>\r\n                <% } %> </h3>\r\n            <% } %>\r\n            <% if(data[i].status == 6 && data[i].initiate == 0) { %>\r\n            <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%> </h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 8 && data[i].initiate == 1) { %>\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><span>退租申请中</span> </h3>\r\n                <a href="javascript:;" class="btn gray light" data-fun="o_confirmCancel">确认退租</a>\r\n                <a href="javascript:;" class="btn gray border" data-fun="o_rejectCancel">拒绝退租</a>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 8 && data[i].initiate == 2) { %>\r\n           <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><span>退租待确认</span> </h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 6 && (data[i].initiate == 2 || data[i].initiate == 1)) { %>\r\n\r\n            <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%><span>退租申请成功</span> </h3>\r\n            <% } %>\r\n            \r\n        <% } else { %>\r\n\r\n            <% if(data[i].status == 0 && data[i].initiate == 1) { %>\r\n            <h3 data-detail="false">合同录入中</h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 7 && (data[i].initiate == 1 || data[i].initiate == 2)) { %>\r\n            <h3 data-detail="false">已取消签约</h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 10 && data[i].currentType == 3) { %>\r\n                <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                    <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                <% } %>\r\n                <% if(data[i].isAck != 1) { %>\r\n                    <a href="javascript:;" class="btn light btn-underline" data-fun="o_confirm">确认合同</a>\r\n                <% } %>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 1 && data[i].initiate == 3) {%>\r\n                <% if(data[i].crpStatus == 1 && data[i].type == 3) {%>\r\n                    <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                    <% if(data[i].isAck != 1) { %>\r\n                        <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n                    <% } %>\r\n                <% }else{ %>\r\n                    <h3>待确认</h3>\r\n                    <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n                <% } %>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 0 && data[i].initiate == 3) {%>\r\n                <h3>待确认</h3>\r\n                <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 7 && (data[i].initiate == 3 || data[i].initiate == 0)) { %>\r\n            <%if(data[i].recordStatus == 4){%>\r\n                <h3>已失效</h3>\r\n            <%}else {%>\r\n                <h3 data-detail="false">已失效</h3>\r\n            <%}%> \r\n            <% } %>\r\n\r\n            <% if(data[i].status == 2 && data[i].initiate == 1) {%>\r\n                <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                    <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                    <% if(data[i].isAck != 1) { %>\r\n                        <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n                    <% } %>\r\n                <% }else{ %>\r\n                    <h3>待确认</h3>\r\n                    <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n                <% } %>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 1 && data[i].initiate == 2) {%>\r\n                <% if(data[i].crpStatus == 1 && data[i].type == 3) { %>\r\n                    <h3><%= verifyCrpArr[data[i].codeStatus][data[i].currentType] %></h3>\r\n                    <% if(data[i].isAck != 1) { %>\r\n                        <a href="javascript:;" class="btn gray light" data-fun="o_confirm">确认合同</a>\r\n                    <% } %>\r\n                <% }else{ %>\r\n                    <h3>待租客确认</h3>\r\n                <% } %>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 9) { %>\r\n                <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                    已生效\r\n                <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                    待生效\r\n                <%}%> </h3>\r\n                <% if(data[i].evictStatus) { %>\r\n                <span>退租失败</span>\r\n                <% } %>\r\n            <% } %>\r\n            \r\n            <% if(data[i].status == 4) { %>\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><% if(data[i].evictStatus) { %>\r\n                    <span>退租失败</span>\r\n                <% } %> </h3>\r\n\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 6 && data[i].initiate == 0) { %>\r\n            <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%> </h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 8 && data[i].initiate == 1) { %>\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><span>退租申请中</span> </h3>\r\n            <% if(data[i].crpStatus == 1) { %>\r\n                <% if(data[i].isAck != 1) { %>\r\n                    <a href="javascript:;" class="btn gray light" data-fun="o_confirmCancel">确认退租</a>\r\n                    <a href="javascript:;" class="btn gray border" data-fun="o_rejectCancel">拒绝退租</a>\r\n                <% } %>\r\n            <%}else{%>\r\n                <a href="javascript:;" class="btn gray light" data-fun="o_confirmCancel">确认退租</a>\r\n                <a href="javascript:;" class="btn gray border" data-fun="o_rejectCancel">拒绝退租</a>\r\n            <% } %>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 8 && data[i].initiate == 2) { %>\r\n            <h3><%if(data[i].recordStatus == 3 || data[i].recordStatus == 6 || data[i].recordStatus == 7 || data[i].recordStatus == 8){%>\r\n                已生效\r\n            <%}else if(data[i].recordStatus == 1 || data[i].recordStatus == 2){%>\r\n                待生效\r\n            <%}%><span>退租待确认</span> </h3>\r\n            <% } %>\r\n\r\n            <% if(data[i].status == 6 && (data[i].initiate == 2 || data[i].initiate == 1)) { %>\r\n            <h3><%if(data[i].recordStatus == 5){%>\r\n                已失效\r\n            <%}else{%>\r\n                已结束\r\n            <%}%><span>退租申请成功</span> </h3>\r\n            <% } %>\r\n        <% } %>\r\n    <% } %>\r\n    </div>\r\n    <dl class="item-dl-wrapper clearfix">\r\n        <dt class="house-img-wrapper">\r\n            <% if (data[i].housePicKey && data[i].housePicExt) { %>\r\n            <img src="<%= imgUrl + \'/\' + data[i].housePicKey+\'/900x675.\'+data[i].housePicExt %>" alt="">\r\n            <% } else { %>\r\n            <img src="<%= defaultUrl %>" alt="">\r\n            <% } %>\r\n        </dt>\r\n        <dd class="house-info-wrapper clearfix">\r\n            <div class="house-info-detail">\r\n                <p class="house-name"><%= data[i].community  %></p>\r\n                <p class="house-area">\r\n                <%= data[i].rentTypeDesc  %> · <%= data[i].huxing  %> · <%= data[i].space / 100 %>㎡\r\n                </p>\r\n                <p class="house-addr">\r\n                    <%= data[i].location  %>\r\n                    <%= data[i].address %>\r\n                </p>\r\n                <!-- <p class="house-tags">\r\n                    <span>独立阳台</span>\r\n                </p>\r\n                <p class="is-auth">\r\n                    <i class="safe-bg"></i>\r\n                    认证房东\r\n                </p> -->\r\n                 <% if(data[i].recordStatus && data[i].recordStatus!=\'\' && data[i].recordStatus!=1 && data[i].recordStatus!=2){ %>\r\n                 <p class="is-ba">\r\n                 <% if(data[i].recordStatus==3){ %>\r\n                    <i class="icon-ba icon-bacg"></i>已备案\r\n                 <% }else if(data[i].recordStatus==4) {%>\r\n                    <i class="icon-ba icon-basb"></i>备案失败\r\n                 <% }else if(data[i].recordStatus==5) {%>\r\n                    <i class="icon-ba icon-zxcg"></i>已注销\r\n                 <% }else if(data[i].recordStatus==6) {%>\r\n                    <i class="icon-ba icon-bacg"></i>已备案\r\n                 <% } %>\r\n                </p>\r\n                <% } %>\r\n                <div class="how-many">\r\n                    <p class="price">\r\n                        <strong>\r\n                            <%= data[i].mouthPrice/100 %>\r\n                        </strong>\r\n                        <span>元/月</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </dd>\r\n    </dl>\r\n</div>\r\n<% } %>',init:function(){this.bindEvent(),this.initData()},initData:function(){this.getContractList()},bindEvent:function(){var t=this;a(".dialog-wrapper").dialog({customWraper:!0}),a(".dialog-wrapper").on("click",".close-btn",function(){a(".dialog-wrapper").dialog("instance").close()}),a("#confirmCancel").on("click",".nocancel",function(){a("#confirmCancel").dialog("instance").close()}),a("#confirmCancel").on("click",".cancel",function(){a("#confirmCancel").dialog("instance").close();var r=a(this).data("initiate");1==r?t.tenantRequestCancelSign():2==r&&t.ownerRejectSign()}),a("#toBindCard").on("click",".close-btn",function(){a("#toBindCard").dialog("instance").close()}),a("#bindCard").click(function(){location.href="/pc/user/bindCard"}),a("#pay-dialog").on("click",".close-btn",function(){a("#pay-dialog").dialog("instance").close()}),a("#pay").click(function(){t.pay()}),a("#retire-dialog").on("click",".close-btn",function(){a("#retire-dialog").dialog("instance").close()}),a("#retire-btn").click(function(){t.initiateRetire(),a("#retire-dialog").dialog("instance").close()}),a("#isretire-dialog").on("click",".close-btn",function(){a("#isretire-dialog").dialog("instance").close()}),a("#isretire-btn").click(function(){t.isRetire("yes"),a("#isretire-dialog").dialog("instance").close()}),a("#J_verifycrp_dialog .btn").click(function(){a("#J_verifycrp_dialog").dialog("instance").close()}),a(".zuyue-list-wrapper").on("click",".item-wrapper",function(r){var n=r.target;return t.config.curId=a(this).data("id"),"A"==n.tagName?(("t_confirm"==a(n).data("fun")||"o_confirm"==a(n).data("fun"))&&(location.href="/pc/user/zuyue/detail?id="+t.config.curId),"t_cancel"==a(n).data("fun")&&(a("#confirmCancel .cancel").data("initiate",1),a("#confirmCancel").dialog("instance").open()),"o_reject"==a(n).data("fun")&&(a("#confirmCancel .cancel").data("initiate",2),a("#confirmCancel").dialog("instance").open()),"o_add"==a(n).data("fun")&&t.verifyCrp(),("t_applyCancel"==a(n).data("fun")||"o_applyCancel"==a(n).data("fun"))&&(a("#role").text(/^t.+$/.test(a(n).data("fun"))?"房东":"租客"),a("#retire-dialog").dialog("instance").open()),("o_confirmCancel"==a(n).data("fun")||"t_confirmCancel"==a(n).data("fun"))&&a("#isretire-dialog").dialog("instance").open(),("o_rejectCancel"==a(n).data("fun")||"t_rejectCancel"==a(n).data("fun"))&&t.isRetire("no"),"pay"==a(n).data("fun")&&(location.href="/pc/user/listOfBills?type="+a(n).data("type")+"&cid="+a(n).data("id")),void("bill"==a(n).data("fun")&&(location.href="/pc/user/listOfBills?type="+a(n).data("type")+"&cid="+a(n).data("id")))):void(a(this).find("h3").data("detail")!==!1&&(location.href="/pc/user/zuyue/detail?id="+t.config.curId))}),a("#J_authorization_dialog").on("click",".close-btn,.btn-gray",function(){a("#J_authorization_dialog").dialog("instance").close()}),a("#J_authorization_dialog").on("click","#J_agree",function(){t.openWallet(),a("#J_authorization_dialog").dialog("instance").close()})},verifyCrp:function(){var t=this;a.ajax({url:t.config.verifyCrp+t.config.curId,type:"POST",contentType:"application/json;chartset=utf-8",data:JSON.stringify({id:t.config.curId}),success:function(r){r.success?t.queryIsOpenWallet(function(){location.href="/pc/user/zuyue/addContract?id="+t.config.curId},function(){a("#J_authorization_dialog").dialog("instance").open()}):(a("#verify_crp_text").text(r.msg),a("#J_verifycrp_dialog").dialog("instance").open(),setTimeout(function(){a("#J_verifycrp_dialog").dialog("instance").close()},5e3))},error:function(a){console.log(a)}})},getContractList:function(){var t=this;this.config.currentPage=this.getQueryParam("page")||1,a.ajax({url:t.config.getListUrl,type:"GET",dataType:"json",data:{from:"C",pageNo:t.config.currentPage,pageSize:t.config.pageSize},success:function(a){a.success?t.renderList({data:a.data.list,imgUrl:pageConfig.sHouseViewUrl,defaultUrl:pageConfig.loadImg,total:a.data.total}):e.show(a.msg)},error:function(){}})},renderList:function(t){var n=this,i=Math.ceil(t.total/this.config.pageSize);if(this.config.total=i,t.data.length>0){i>1&&n.pagination(),t.data.map(function(a){return a.isC2B=2==a.type||4==a.type||5==a.type});var e=r.parse(this.listTpl,t);a(".zuyue-list-wrapper").html(e).removeClass("hidden")}else a(".no-data").removeClass("hidden")},tenantRequestCancelSign:function(){var t=this;t.flag.one||(t.flag.one=!0,a.ajax({url:t.config.tenantRequestCancelSignUrl+t.config.curId,type:"POST",contentType:"application/json;chartset=utf-8",data:JSON.stringify({id:t.config.curId}),success:function(a){a.success?(e.show("取消签约成功"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),t.flag.one=!1},error:function(){t.flag.one=!1}}))},ownerRejectSign:function(){var t=this;t.flag.one||(t.flag.one=!0,a.ajax({url:t.config.ownerRejectSignUrl+t.config.curId,type:"POST",contentType:"application/json;chartset=utf-8",data:JSON.stringify({contractId:t.config.curId,initiate:2,reason:""}),success:function(a){a.success?(e.show("取消签约成功"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),t.flag.one=!1},error:function(){t.flag.one=!1}}))},initiateRetire:function(){var t=this;t.flag.two||(t.flag.two=!0,a.ajax({url:t.config.initiateRetireUrl,type:"POST",data:{contractId:t.config.curId},success:function(a){a.success?(e.show("发起退租"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),t.flag.two=!1},error:function(){t.flag.two=!1}}))},isRetire:function(t){var r=this;r.flag.two||(r.flag.two=!0,a.ajax({url:r.config.retireUrl,type:"POST",data:{contractId:r.config.curId,status:t},success:function(a){a.success?(e.show("yes"==t?"确认退租":"拒绝退租"),setTimeout(function(){window.location.reload()},1e3)):e.show(a.msg),r.flag.two=!1},error:function(){r.flag.two=!1}}))},isBindCard:function(t){var r=this;a.ajax({url:"/web/account/card",type:"GET",success:function(n){n.success?n.data.length>0?t.call(r):a("#toBindCard").dialog("instance").open():e.show(n.msg)},error:function(){}})},queryIsOpenWallet:function(t,r){var n=this;n.flag.four||(n.flag.four=!0,a.ajax({url:n.config.isOpenWallet,type:"GET",success:function(a){200===a.status?a.data.isRegister?t.call(n):r.call(n):e.show(a.message),n.flag.four=!1},error:function(a){console.log(a),n.flag.four=!1}}))},openWallet:function(){var t=this;t.flag.three||(t.flag.three=!0,a.ajax({url:t.config.openWallet,type:"POST",success:function(a){200===a.status?window.location.reload():e.show(a.message),t.flag.three=!1},error:function(a){t.flag.three=!1,console.log(a)}}))},pay:function(){var t=this;a.ajax({url:"/web/contract/rent/pay/"+t.config.curId+"/1",type:"POST",data:{id:t.config.curId,billOrder:"1"},success:function(t){t.success?(e.show("支付成功"),a("#pay-dialog").dialog("instance").close(),setTimeout(function(){window.location.reload()},1e3)):e.show(t.msg)},error:function(){}})},getQueryParam:function(a){var t=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?unescape(r[2]):null},pagination:function(){{var t=this;a("#J_pagenation").pager({pageTotal:t.config.total,currentPage:t.config.currentPage,perPage:t.config.pageSize,className:"pagination-box",currentClassName:"current-pager"}).on("pager:switch",function(t,r){a(".ui2-pager-current").html();var n=location.search,i=/page\=[^&]+/,e=null;n&&i.test(n)&&(e=location.pathname+n.replace(i,"page="+r)),n||(e=location.pathname+"?page="+r),n&&!i.test(n)&&(e=location.href+"&page="+r),location.href=e})}this.paginationPosition()},paginationPosition:function(){var t=0;a(".pagination-box li").each(function(){t+=a(this).outerHeight()+13}),a(".pagination-box").width(t)}};s.init()})});