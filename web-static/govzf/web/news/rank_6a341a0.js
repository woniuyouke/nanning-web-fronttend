define("web:static/news/rank.js",function(e){"use strict";e.async(["common:components/jquery/jquery.js","web:components/dropSelect/dropSelect.js","common:components/pcUI/pager/pager.js"],function(e){var a={lock:!1,suggestionObj:null,urlParamObj:{},search_content:{pageNo:1,pageSize:10,rankType:1,companyType:1,periodType:1},total:0,init:function(){this.selectPulin(),this.getInfo()},pagination:function(){var a=arguments.length<=0||void 0===arguments[0]?1:arguments[0],n=this;e("#J_pagenation").trigger("pager:destroy");e("#J_pagenation").pager({dom:e("#J_pagenation"),pageTotal:Math.ceil(n.total/10),currentPage:a,perPage:10,className:"pagination-box",currentClassName:"current-pager"}).off("pager:switch").on("pager:switch",function(a,t){e(".nowpage").text(0===n.total?0:10*t-9+"-"+10*t),n.search_content.pageNo=t,n.getInfo(!0),e(".ui2-pager-current").html()});this.paginationPosition()},paginationPosition:function(){var a=0;e(".pagination-box li").each(function(){a+=e(this).outerHeight()+13}),e(".pagination-box").width(a)},selectPulin:function(){var a=this;e("#J_rent_type").dropSelect({title:"",showSelectedVal:!0,needDefaultOption:!1,data:[{key:1,value:"房源挂牌量"},{key:2,value:"房源签约量"}],type:"single",defaultValue:[1],selectHandler:function(e){a.search_content.pageNo=1,a.search_content.rankType=e.toString(),a.getInfo()}}),e("#J_origanization_type").dropSelect({title:"",showSelectedVal:!0,needDefaultOption:!1,data:[{key:1,value:"中介"},{key:2,value:"租赁企业"},{key:3,value:"国有企业"},{key:4,value:"开发企业"}],type:"single",defaultValue:[1],selectHandler:function(e){a.search_content.pageNo=1,a.search_content.companyType=e.toString(),a.getInfo()}}),e("#J_circle").dropSelect({title:"",showSelectedVal:!0,needDefaultOption:!1,data:[{key:1,value:"上一月"},{key:2,value:"半年"},{key:3,value:"全年"},{key:4,value:"不限"}],type:"single",defaultValue:[4],selectHandler:function(e){a.search_content.pageNo=1,a.search_content.periodType=e.toString(),a.getInfo()}})},getInfo:function(a){var n=this;e.ajax({url:"/web/report/rentrank",type:"get",dataType:"json",data:n.search_content,success:function(t){var o=t.data.list;n.total=parseInt(t.data.total),e(".total").text(n.total),a||n.pagination(1);for(var s='<li class="title J_rank_info_ul_li"><span class="number">排名</span><span class="logo">机构logo</span><span class="name">机构名称</span>'+(1==n.search_content.rankType?'<span class="count">房源挂牌量</span>':'<span class="count">房源签约量</span>')+"</li>",l=0;l<o.length;l++){var c,i,p='<li class="J_rank_info_ul_li"><span class="number">${order}</span>'+(o[l].companyLogoPics?'<span class="logo"><img class="logo_img" src="${url}"></span>':'<span class="logo"><span class="no_logo"></span></span>')+'<span class="name">'+o[l].companyName+'</span><span class="count">'+o[l].totalNum+"</span></li>";switch(o[l].companyLogoPics&&(i="/view/house/"+o[l].companyLogoPics[0].imgKey+"/900x675."+o[l].companyLogoPics[0].imgExt),parseInt(o[l].order)){case 1:c='<span class="no ph1"></span>';break;case 2:c='<span class="no ph2"></span>';break;case 3:c='<span class="no ph3"></span>';break;default:c=o[l].order}s+=p.replace("${url}",i).replace("${order}",c)}e(".J_rank_info_ul").html(s)}})}};a.init()})});