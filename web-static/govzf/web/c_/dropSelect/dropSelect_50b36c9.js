define("web:components/dropSelect/dropSelect.js",function(e){"use strict";e("web:components/dropSelect/dropSelect.css"),e.async(["common:components/jquery/jquery.js"],function(e){+function(e){e.fn.dropSelect=function(e){return new n(this,e)};var n=function(e,n){this.$element=e,this.options=n,this.init(n)},i="drop-checkbox-checked";n.prototype.init=function(n){function t(n){!!_&&n.find(".drop-select").css("width",_),n.find(".drop-select").on("mouseenter",function(){var n=e(this);o(!0),n.find(".iconfont").removeClass("icon-arrow_down").addClass("icon-arrow_up")}).on("mouseleave",function(){var n=e(this);o(!1),n.find(".iconfont").removeClass("icon-arrow_up").addClass("icon-arrow_down")}),n.find(".drop-select").off("click").on("click",".option-item",function(){var n=e(this),t=n.parent(),a=[],s=[],r=n.attr("data-key");if(b&&l(),"single"===y){var c=n.attr("data-key");if(O&&c>100)return;t.find(".option-item").removeClass("selected"),c&&s.push(n.html()),c&&a.push(c)}else{var p=n.hasClass("selected")?"removeClass":"addClass";n[p]("selected"),r?(t.find(".option-item").eq(0).removeClass("selected"),n.find(".drop-checkbox")[p](i)):(a.length=0,s=[d],t.find(".option-item").removeClass("selected"),n.addClass("selected"),t.find("."+i).removeClass(i));for(var v=t.find(".option-item.selected"),f=0;f<v.length;f++){var m=e(v[f]),u=m.attr("data-key");u&&(a.push(u),s.push(m.find("label").html()))}}if(C){if(O&&a[0]>100)return;if(0!==a.length)var h=s.join("/")||d;else var h="不限";t.siblings(".drop-select-main").html(h).attr("title",h),s.length?t.siblings(".drop-select-main").hasClass(V)||t.siblings(".drop-select-main").addClass(V):t.siblings(".drop-select-main").removeClass(V)}"single"===y&&o(!1),j&&j(a)}),b&&(n.find(".range .input").on("keyup",function(){var n=e(this);n.val(n.val().replace(/\D/g,""));var i=n.parent().find(".range-ok");n.val()&&i.css({display:"inline-block"});var t=a(),o=t.from,l=t.to;o||l||i.hide()}),n.find(".range .range-ok").on("click",function(){var e=a(),i=e.from,t=e.to,l=e.isRevert;l&&(n.find(".range .range-from").val(i),n.find(".range .range-to").val(t)),S&&S({from:i,to:t}),o(!1),n.find(".option-item").removeClass("selected");var s="";i&&t?s=i+"-"+t+W:i?s=i+W+"以上":t&&(s=t+W+"以下"),n.find(".drop-select-main").html(s).attr("title",s)}))}function o(e){s.find(".drop-select-option")[e?"addClass":"removeClass"]("option-hovered")}function a(){var e=s.find(".range .range-from").val(),n=s.find(".range .range-to").val(),i=!1;if(e&&n&&~~e>~~n){var t=[e,n];e=t[1],n=t[0],i=!0}return{from:e,to:n,isRevert:i}}function l(){s.find(".range .input").val("")}var s=this.$element,r=n.title,d=void 0===r?"请选择...":r,c=n.needDefaultOption,p=n.defaultOptionTitle,v=void 0===p?"不限":p,f=n.data,m=void 0===f?[]:f,u=n.defaultValue,h=void 0===u?[]:u,g=n.defaultRange,k=void 0===g?[]:g,y=n.type,C=n.showSelectedVal,b=n.rangeFlag,w=n.rangeConfig,x=void 0===w?{}:w,j=n.selectHandler,S=n.confirmHandler,_=n.mainWidth,H=n.selectedClassName,V=void 0===H?"":H,q=n.isLimit,O=void 0===q?!1:q;C="boolean"==typeof C?C:!0,b="boolean"==typeof b?b:!1,c="boolean"==typeof c?c:!0;var R=[],$=m.length&&m.map(function(e){var n=h.length>0&&h.indexOf(e.key)>-1;n&&R.push(e.value);var t=n?"selected":"";return"single"===y?'<div class="option-item '+t+'" data-key="'+e.key+'">'+e.value+"</div>":"multiple"===y?'<div class="option-item '+t+'" data-key="'+e.key+'">\n                              \n                              <span class="drop-checkbox '+(n?i:"")+'">\n                                <input type="checkbox" class="drop-checkbox-input" value="on">\n                                <span class="drop-checkbox-inner"></span>\n                              </span>\n                              \n                              <label for="option_item_'+e.key+'">'+e.value+"</label>\n                            </div>":void console.error('param "type" is wrong!')})||[];c&&$.splice(0,0,'<div class="option-item" data-key="">'+v+"</div>");var D=C&&R.length?R.join("/"):d,F=C&&R.length?V:"",P=x.unit,W=void 0===P?"元":P,L=x.fromPlaceholder,N=void 0===L?"最低价":L,Q=x.toPlaceholder,T=void 0===Q?"最高价":Q,z='\n                <div class="range">\n                  <input type="text" class="input range-from" placeholder="'+N+'" value="'+(k&&k[0]||"")+'"/>\n                  -\n                  <input type="text" class="input range-to" placeholder="'+T+'" value="'+(k&&k[1]||"")+'" /> '+W+'\n                  <div class="range-ok">确定</div>\n                </div>\n            ',A='\n                <div class="drop-select">\n                  <div class="drop-select-main '+F+'">'+D+'</div>\n                  \n                  <div class="drop-select-icon">\n                    <i class="icon iconfont icon-arrow_down"></i>\n                  </div>\n                  \n                  <div class="drop-select-option '+(b?"drop-input":"")+'">\n                    '+$.join("")+"\n                    "+(b&&z||"")+"\n                  </div>\n                </div>\n            ";s.append(A),t(s),k&&k.length&&s.find(".range .range-ok").trigger("click")},n.prototype.clear=function(){{var e=this.$element,n=this.options,t=n.title,o=void 0===t?"请选择...":t,a=(n.data,n.defaultValue,n.type),l=(n.showSelectedVal,n.rangeFlag);n.selectHandler,n.confirmHandler,n.mainWidth}e.find(".option-item").removeClass("selected"),e.find(".drop-select-main").html(o),"multiple"===a&&e.find("."+i).removeClass(i),l&&(e.find(".range .input").val(""),e.find(".range .range-ok").hide())}}(window.jQuery||e)})});